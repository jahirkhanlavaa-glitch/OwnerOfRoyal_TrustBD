<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL TRUST BD - এডমিন প্যানেল</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Hind Siliguri', sans-serif; box-sizing: border-box; }
        
        body { overflow-x: hidden; background: #f7fafc; }
        
        .admin-container { display: flex; min-height: 100vh; }
        
        .sidebar {
            width: 280px; background: linear-gradient(180deg, #1a202c, #2d3748);
            color: white; position: fixed; left: 0; top: 0; bottom: 0;
            z-index: 40; overflow-y: auto; transition: transform 0.3s ease;
            display: flex; flex-direction: column;
        }
        
        @media (max-width: 767px) {
            .sidebar { transform: translateX(-280px); }
            .sidebar.mobile-open { transform: translateX(0); }
            .sidebar-overlay {
                display: none; position: fixed; inset: 0;
                background: rgba(0,0,0,0.5); z-index: 39;
            }
            .sidebar-overlay.active { display: block; }
            .main-content { margin-left: 0; padding-top: 70px; }
            .mobile-header { display: flex; }
        }
        
        .main-content { flex: 1; margin-left: 280px; min-height: 100vh; }
        
        .sidebar-footer {
            position: fixed; bottom: 0; left: 0; width: 280px;
            background: #2d3748; border-top: 1px solid #4a5568;
            padding: 16px; z-index: 41;
        }
        
        .mobile-header {
            display: none; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            padding: 12px 16px; height: 70px; justify-content: space-between; align-items: center;
        }
        
        .nav-item {
            display: flex; align-items: center; padding: 12px 20px;
            border-radius: 8px; transition: all 0.3s ease;
            margin-bottom: 6px; cursor: pointer; border: 1px solid transparent;
        }
        .nav-item:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); }
        .nav-item.active { background: rgba(220,38,38,0.2); border-color: rgba(220,38,38,0.3); }
        .nav-item i { width: 24px; margin-right: 12px; font-size: 18px; }
        
        .logout-btn {
            display: flex; align-items: center; justify-content: flex-start;
            width: 100%; padding: 12px 20px; background: #dc2626; color: white;
            border: none; border-radius: 8px; font-weight: 500; cursor: pointer;
            transition: all 0.3s ease; margin-top: 10px;
        }
        .logout-btn:hover { background: #b91c1c; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(220,38,38,0.3); }
        
        .stat-card { transition: all 0.3s ease; border: 1px solid #e2e8f0; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .order-status { padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; display: inline-block; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-confirmed { background: #dbeafe; color: #1e40af; }
        .status-processing { background: #f3e8ff; color: #7c3aed; }
        .status-shipped { background: #f0f9ff; color: #0c4a6e; }
        .status-delivered { background: #d1fae5; color: #065f46; }
        .status-cancelled { background: #fee2e2; color: #991b1b; }
        
        .data-table {
            width: 100%; border-collapse: collapse; background: white;
            border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .data-table th { background: #f8fafc; padding: 16px; text-align: left; font-weight: 600; color: #4a5568; border-bottom: 2px solid #e2e8f0; }
        .data-table td { padding: 16px; border-bottom: 1px solid #e2e8f0; }
        .data-table tr:hover { background: #f7fafc; }
        
        .modal {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5);
            z-index: 1000; align-items: center; justify-content: center; padding: 20px;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 12px; max-width: 900px;
            width: 100%; max-height: 90vh; overflow-y: auto;
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%; padding: 12px; border: 1px solid #e2e8f0;
            border-radius: 8px; font-size: 16px; transition: all 0.3s ease;
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none; border-color: #4299e1; box-shadow: 0 0 0 3px rgba(66,153,225,0.1);
        }
        
        .btn-primary { background: #dc2626; color: white; }
        .btn-primary:hover { background: #b91c1c; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(220,38,38,0.3); }
        .btn-outline { background: transparent; color: #4a5568; border: 1px solid #e2e8f0; }
        .btn-outline:hover { background: #f7fafc; border-color: #cbd5e0; }
        
        .image-upload-container {
            border: 2px dashed #cbd5e0; border-radius: 8px; padding: 40px 20px;
            text-align: center; cursor: pointer; transition: all 0.3s ease;
            background: #f8fafc; position: relative; overflow: hidden;
        }
        .image-upload-container:hover { border-color: #4299e1; background: #edf2f7; }
        .image-upload-container.has-image { border-color: #48bb78; background: #f0fff4; }
        .image-preview { max-width: 100%; max-height: 200px; border-radius: 6px; margin-top: 15px; display: none; }
        .image-preview.show { display: block; }
        
        .notification {
            position: fixed; top: 20px; right: 20px; padding: 16px 24px;
            border-radius: 8px; color: white; z-index: 1001;
            animation: slideInRight 0.3s ease; max-width: 400px;
        }
        .notification.success { background: #48bb78; }
        .notification.error { background: #f56565; }
        .notification.warning { background: #ed8936; }
        .notification.info { background: #4299e1; }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-dropdown {
            position: absolute; top: 100%; right: 0; width: 400px;
            background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000; display: none; max-height: 500px; overflow-y: auto;
        }
        .notification-dropdown.show { display: block; }
        @media (max-width: 640px) {
            .notification-dropdown {
                position: fixed !important; top: 70px !important;
                left: 10px !important; right: 10px !important;
                width: calc(100% - 20px) !important; max-height: 60vh;
            }
        }
        
        .notification-badge {
            position: absolute; top: -5px; right: -5px; background: #ef4444;
            color: white; border-radius: 50%; width: 18px; height: 18px;
            font-size: 10px; display: flex; align-items: center; justify-content: center;
        }
        
        .color-option { width: 30px; height: 30px; border-radius: 50%; display: inline-block; margin-right: 8px; border: 2px solid transparent; }
        .color-option.active { border-color: #333; transform: scale(1.1); }
        
        .badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .badge-success { background: #d1fae5; color: #065f46; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }
        
        .switch { position: relative; display: inline-block; width: 60px; height: 30px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: ""; height: 22px; width: 22px;
            left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: #dc2626; }
        input:checked + .slider:before { transform: translateX(30px); }
        
        .tab-container { display: flex; border-bottom: 2px solid #e2e8f0; margin-bottom: 20px; }
        .tab-btn { padding: 10px 20px; background: none; border: none; cursor: pointer; font-weight: 500; color: #4a5568; position: relative; }
        .tab-btn:hover { color: #dc2626; }
        .tab-btn.active { color: #dc2626; }
        .tab-btn.active::after {
            content: ''; position: absolute; bottom: -2px; left: 0; right: 0;
            height: 2px; background: #dc2626;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .loading {
            display: inline-block; width: 20px; height: 20px;
            border: 3px solid #f3f3f3; border-top: 3px solid #dc2626;
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<!-- লগইন পেজ -->
<div id="login-page" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-blue-50">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4">
        <div class="text-center mb-8">
            <div class="w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-crown text-white text-3xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-red-700 mb-2">ROYAL TRUST BD</h1>
            <p class="text-gray-600">এডমিন প্যানেল লগইন</p>
        </div>
        
        <form id="login-form" class="space-y-6">
            <div>
                <label class="block text-gray-700 mb-2">
                    <i class="fas fa-user mr-2 text-red-600"></i>ব্যবহারকারীর নাম
                </label>
                <input type="text" id="username" required 
                       class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"
                       placeholder="ব্যবহারকারীর নাম" value="admin">
            </div>
            <div>
                <label class="block text-gray-700 mb-2">
                    <i class="fas fa-lock mr-2 text-red-600"></i>পাসওয়ার্ড
                </label>
                <input type="password" id="password" required 
                       class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"
                       placeholder="পাসওয়ার্ড" value="admin123">
            </div>
            
            <div id="login-error" class="text-red-600 text-center hidden bg-red-50 p-4 rounded-lg">
                <i class="fas fa-exclamation-circle mr-2"></i>
                <span id="login-error-text">ভুল ব্যবহারকারীর নাম বা পাসওয়ার্ড!</span>
            </div>
            
            <button type="submit" id="login-btn" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 rounded-lg transition">
                <i class="fas fa-sign-in-alt mr-2"></i>লগইন করুন
            </button>
        </form>
        
        <div class="mt-8 pt-6 border-t border-gray-200 text-center text-gray-600">
            <p class="text-sm">ডিফল্ট লগইন: admin / admin123</p>
            <p class="text-xs text-gray-500 mt-2">API: https://ownerofroyal-trustbd.onrender.com</p>
        </div>
    </div>
</div>

<!-- এডমিন প্যানেল -->
<div id="admin-panel" class="admin-container hidden">
    <!-- মোবাইল হেডার -->
    <div class="mobile-header">
        <button id="mobile-menu-btn" class="text-gray-700 p-2">
            <i class="fas fa-bars text-xl"></i>
        </button>
        <h1 class="text-xl font-bold text-red-700">ROYAL TRUST BD</h1>
        <div class="relative">
            <button id="mobile-notification-btn" class="text-gray-700 p-2 relative">
                <i class="fas fa-bell text-xl"></i>
                <span id="mobile-notification-count" class="notification-badge hidden">0</span>
            </button>
            <div class="notification-dropdown" id="mobile-notification-dropdown">
                <div class="p-4 border-b">
                    <div class="flex justify-between">
                        <h3 class="font-bold">নোটিফিকেশন</h3>
                        <button id="mobile-mark-all-read" class="text-sm text-blue-600">সব পড়া হয়েছে</button>
                    </div>
                </div>
                <div id="mobile-notification-list"></div>
                <div class="p-4 text-center border-t">
                    <a href="#" onclick="switchPage('orders')" class="text-sm text-blue-600">সব অর্ডার দেখুন</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- সাইডবার ওভারলে -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    
    <!-- সাইডবার -->
    <div class="sidebar" id="sidebar">
        <div class="p-6 border-b border-gray-700">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white text-xl">
                    <i class="fas fa-crown"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold">ROYAL TRUST BD</h2>
                    <p class="text-gray-400 text-sm">এডমিন প্যানেল</p>
                </div>
            </div>
        </div>
        
        <div class="sidebar-content flex-1 overflow-y-auto p-4">
            <nav>
                <div class="mb-6">
                    <h3 class="text-gray-400 text-xs uppercase tracking-wider mb-3 px-4">মূল মেনু</h3>
                    <div class="space-y-1">
                        <a href="#dashboard" class="nav-item active" data-page="dashboard">
                            <i class="fas fa-tachometer-alt"></i>ড্যাশবোর্ড
                        </a>
                        <a href="#products" class="nav-item" data-page="products">
                            <i class="fas fa-tshirt"></i>পণ্য ব্যবস্থাপনা
                        </a>
                        <a href="#orders" class="nav-item" data-page="orders">
                            <i class="fas fa-shopping-cart"></i>অর্ডার ব্যবস্থাপনা
                        </a>
                        <a href="#reviews" class="nav-item" data-page="reviews">
                            <i class="fas fa-star"></i>রিভিউ ব্যবস্থাপনা
                        </a>
                        <a href="#sliders" class="nav-item" data-page="sliders">
                            <i class="fas fa-images"></i>স্লাইডার ব্যবস্থাপনা
                        </a>
                        <a href="#settings" class="nav-item" data-page="settings">
                            <i class="fas fa-cog"></i>ওয়েবসাইট সেটিংস
                        </a>
                    </div>
                </div>
            </nav>
        </div>
        
        <!-- সাইডবার ফুটার -->
        <div class="sidebar-footer">
            <div class="text-center">
                <p class="text-gray-400 text-sm">লগইন করেছেন:</p>
                <p id="logged-in-user" class="font-bold text-white">-</p>
            </div>
            <button id="logout-btn" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>লগআউট
            </button>
        </div>
    </div>
    
    <!-- মেইন কন্টেন্ট -->
    <div class="main-content" id="main-content">
        <!-- ডেস্কটপ হেডার -->
        <header class="bg-white shadow-sm border-b border-gray-200 desktop-only">
            <div class="px-6 py-4">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800" id="page-title">ড্যাশবোর্ড</h1>
                        <p class="text-gray-600 text-sm mt-1" id="page-subtitle">সর্বশেষ আপডেট এবং পরিসংখ্যান</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button id="notification-btn" class="text-gray-700 p-2 relative">
                                <i class="fas fa-bell text-xl"></i>
                                <span id="notification-count" class="notification-badge hidden">0</span>
                            </button>
                            <div class="notification-dropdown" id="notification-dropdown">
                                <div class="p-4 border-b">
                                    <div class="flex justify-between">
                                        <h3 class="font-bold">নোটিফিকেশন</h3>
                                        <button id="mark-all-read" class="text-sm text-blue-600">সব পড়া হয়েছে</button>
                                    </div>
                                </div>
                                <div id="notification-list"></div>
                                <div class="p-4 text-center border-t">
                                    <a href="#" onclick="switchPage('orders')" class="text-sm text-blue-600">সব অর্ডার দেখুন</a>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-600 text-sm" id="current-date"></p>
                            <p class="text-gray-800 font-medium" id="current-time-large"></p>
                        </div>
                        <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- কন্টেন্ট এরিয়া -->
        <main class="p-4 md:p-6" id="content-area">
            <!-- ড্যাশবোর্ড পেজ -->
            <div id="dashboard-page" class="page-content">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6" id="stats-cards">
                    <!-- স্ট্যাটস কার্ড JS দিয়ে লোড হবে -->
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                    <div class="p-4 md:p-6 border-b">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-bold flex items-center">
                                <i class="fas fa-clock mr-3 text-yellow-500"></i>সাম্প্রতিক অর্ডারসমূহ
                            </h2>
                            <a href="#orders" onclick="switchPage('orders')" class="text-red-600 hover:text-red-800 text-sm font-medium">
                                <span>সব অর্ডার দেখুন</span>
                                <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <div class="p-4 md:p-6">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>অর্ডার আইডি</th>
                                        <th>গ্রাহকের নাম</th>
                                        <th>পণ্য</th>
                                        <th>মোট</th>
                                        <th>স্ট্যাটাস</th>
                                        <th>তারিখ</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-orders-table"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- প্রোডাক্ট মডাল -->
<div id="product-modal" class="modal">
    <div class="modal-content">
        <div class="p-6 border-b">
            <h3 class="text-xl font-bold" id="product-modal-title">নতুন পণ্য যোগ করুন</h3>
        </div>
        <form id="product-form" class="p-6 space-y-6">
            <input type="hidden" id="product-id">
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="form-label">পণ্যের নাম *</label>
                    <input type="text" id="product-name" required class="form-input">
                </div>
                <div>
                    <label class="form-label">ক্যাটাগরি *</label>
                    <select id="product-category" required class="form-input">
                        <option value="panjabi">পাঞ্জাবি</option>
                        <option value="tshirt">টি-শার্ট</option>
                        <option value="three-piece">থ্রি পিজ</option>
                        <option value="fitness">ইসপোর্স ফিটনেস</option>
                    </select>
                </div>
            </div>
            
            <div>
                <label class="form-label">বর্ণনা *</label>
                <textarea id="product-description" required rows="3" class="form-textarea"></textarea>
            </div>
            
            <!-- কালার ম্যানেজমেন্ট -->
            <div>
                <label class="form-label mb-4">রংসমূহ</label>
                <div id="colors-container" class="space-y-6"></div>
                <button type="button" id="add-color-btn" class="mt-4 btn btn-outline w-full flex items-center justify-center">
                    <i class="fas fa-plus-circle mr-2"></i>নতুন রং যোগ করুন
                </button>
            </div>
            
            <!-- ফিটনেস প্রোডাক্টের জন্য ফিচার -->
            <div id="fitness-features-container" style="display: none;">
                <label class="form-label">ফিচারসমূহ</label>
                <div id="features-list" class="space-y-2 mb-2">
                    <div class="flex items-center">
                        <input type="text" placeholder="ফিচার" class="form-input flex-1">
                        <button type="button" class="ml-2 text-red-600 remove-feature"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <button type="button" id="add-feature-btn" class="btn btn-outline text-sm">
                    <i class="fas fa-plus mr-1"></i>ফিচার যোগ করুন
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="form-label">সাইজ *</label>
                    <input type="text" id="product-size" required class="form-input" placeholder="S, M, L, XL, XXL">
                </div>
                <div>
                    <label class="form-label">নিয়মিত দাম *</label>
                    <input type="number" id="regular-price" required class="form-input" min="0">
                </div>
                <div>
                    <label class="form-label">অফার দাম *</label>
                    <input type="number" id="offer-price" required class="form-input" min="0">
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="form-label">ছাড়ের শতাংশ</label>
                    <input type="number" id="offer-percentage" class="form-input bg-gray-50" readonly>
                </div>
                <div>
                    <label class="form-label">স্ট্যাটাস</label>
                    <div class="flex items-center space-x-4">
                        <label class="switch">
                            <input type="checkbox" id="product-status" checked>
                            <span class="slider"></span>
                        </label>
                        <span id="product-status-text">সক্রিয়</span>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end space-x-4 pt-6 border-t">
                <button type="button" id="cancel-product-btn" class="btn btn-outline">বাতিল করুন</button>
                <button type="submit" id="save-product-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-2"></i>সেভ করুন
                </button>
            </div>
        </form>
    </div>
</div>

<!-- স্লাইডার মডাল -->
<div id="slider-modal" class="modal">
    <div class="modal-content">
        <div class="p-6 border-b">
            <h3 class="text-xl font-bold" id="slider-modal-title">নতুন স্লাইডার যোগ করুন</h3>
        </div>
        <form id="slider-form" class="p-6 space-y-6">
            <input type="hidden" id="slider-id">
            
            <div>
                <label class="form-label">স্লাইডার নম্বর *</label>
                <input type="number" id="slider-number" required class="form-input" min="1">
            </div>
            
            <!-- ইমেজ আপলোড ট্যাব -->
            <div>
                <label class="form-label mb-3">স্লাইডার ইমেজ *</label>
                <div class="tab-container">
                    <button type="button" class="tab-btn active" data-tab="url-tab">URL লিংক</button>
                    <button type="button" class="tab-btn" data-tab="upload-tab">ফাইল আপলোড</button>
                </div>
                
                <div id="url-tab" class="tab-content active">
                    <input type="text" id="slider-image-url" class="form-input" placeholder="https://example.com/image.jpg">
                    <img id="slider-url-preview" class="image-preview">
                </div>
                
                <div id="upload-tab" class="tab-content">
                    <div class="image-upload-container" id="slider-image-upload">
                        <div class="text-center">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                            <p class="font-medium">ছবি আপলোড করুন</p>
                            <p class="text-gray-500 text-sm mt-1">PNG, JPG, JPEG, WEBP</p>
                            <input type="file" id="slider-image-file" accept="image/*" class="hidden">
                            <input type="hidden" id="slider-image-base64">
                        </div>
                        <img id="slider-upload-preview" class="image-preview">
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="form-label">শিরোনাম *</label>
                    <input type="text" id="slider-title" required class="form-input">
                </div>
                <div>
                    <label class="form-label">সাবটাইটেল *</label>
                    <input type="text" id="slider-subtitle" required class="form-input">
                </div>
            </div>
            
            <div>
                <label class="form-label">বর্ণনা *</label>
                <textarea id="slider-description" required rows="3" class="form-textarea"></textarea>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="form-label">ব্যাজ টেক্সট</label>
                    <input type="text" id="slider-badge-text" class="form-input">
                </div>
                <div>
                    <label class="form-label">ব্যাজ কালার</label>
                    <select id="slider-badge-color" class="form-input">
                        <option value="red">লাল</option>
                        <option value="blue">নীল</option>
                        <option value="green">সবুজ</option>
                        <option value="purple">বেগুনী</option>
                        <option value="amber">হলুদ</option>
                    </select>
                </div>
                <div>
                    <label class="form-label">স্ট্যাটাস</label>
                    <div class="flex items-center space-x-4">
                        <label class="switch">
                            <input type="checkbox" id="slider-status" checked>
                            <span class="slider"></span>
                        </label>
                        <span id="slider-status-text">সক্রিয়</span>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="form-label">দাম</label>
                    <input type="number" id="slider-price" class="form-input" min="0">
                </div>
                <div>
                    <label class="form-label">আসল দাম</label>
                    <input type="number" id="slider-original-price" class="form-input" min="0">
                </div>
            </div>
            
            <div class="flex justify-end space-x-4 pt-6 border-t">
                <button type="button" id="cancel-slider-btn" class="btn btn-outline">বাতিল করুন</button>
                <button type="submit" id="save-slider-btn" class="btn btn-primary">
                    <i class="fas fa-save mr-2"></i>সেভ করুন
                </button>
            </div>
        </form>
    </div>
</div>

<!-- অর্ডার ডিটেইলস মডাল -->
<div id="order-modal" class="modal">
    <div class="modal-content">
        <div class="p-6 border-b">
            <h3 class="text-xl font-bold">অর্ডার বিবরণ</h3>
        </div>
        <div class="p-6 space-y-6">
            <div id="order-details"></div>
            
            <div>
                <label class="form-label">স্ট্যাটাস পরিবর্তন করুন</label>
                <select id="order-status-select" class="form-input">
                    <option value="pending">পেন্ডিং</option>
                    <option value="confirmed">কনফার্মড</option>
                    <option value="processing">প্রসেসিং</option>
                    <option value="shipped">শিপড</option>
                    <option value="delivered">ডেলিভার্ড</option>
                    <option value="cancelled">ক্যান্সেলড</option>
                </select>
            </div>
            
            <div>
                <label class="form-label">নোটস</label>
                <textarea id="order-notes" rows="3" class="form-textarea"></textarea>
            </div>
            
            <div class="flex justify-end space-x-4 pt-6 border-t">
                <button type="button" id="cancel-order-btn" class="btn btn-outline">বন্ধ করুন</button>
                <button type="button" id="update-order-btn" class="btn btn-primary">
                    <i class="fas fa-sync mr-2"></i>স্ট্যাটাস আপডেট
                </button>
            </div>
        </div>
    </div>
</div>

<!-- নোটিফিকেশন কন্টেইনার -->
<div id="notification-container"></div>

<script>
    // ============================================
    // এডমিন প্যানেল জাভাস্ক্রিপ্ট
    // ============================================
    
    const API_BASE_URL = 'https://ownerofroyal-trustbd.onrender.com';
    // const API_BASE_URL = 'http://localhost:5000'; // লোকাল ডেভেলপমেন্ট
    
    let currentUser = null;
    let currentPage = 'dashboard';
    let selectedOrderId = null;
    let notificationInterval = null;
    let notifications = { unreadOrders: [], unreadReviews: [] };
    
    // DOM এলিমেন্টস
    const loginPage = document.getElementById('login-page');
    const adminPanel = document.getElementById('admin-panel');
    const loginForm = document.getElementById('login-form');
    const sidebar = document.getElementById('sidebar');
    const contentArea = document.getElementById('content-area');
    
    // ============================================
    // ডকুমেন্ট রেডি
    // ============================================
    
    document.addEventListener('DOMContentLoaded', function() {
        const savedUser = localStorage.getItem('admin_user');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
            showAdminPanel();
            loadDashboard();
            startNotificationPolling();
        }
        
        setupEventListeners();
        updateDateTime();
        setInterval(updateDateTime, 1000);
    });
    
    // ============================================
    // ইভেন্ট লিসেনার সেটআপ
    // ============================================
    
    function setupEventListeners() {
        // লগইন
        loginForm.addEventListener('submit', handleLogin);
        
        // মোবাইল মেনু
        document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);
        document.getElementById('sidebar-overlay').addEventListener('click', toggleMobileMenu);
        
        // নেভিগেশন
        document.querySelectorAll('.nav-item[data-page]').forEach(item => {
            item.addEventListener('click', handleNavigation);
        });
        
        // লগআউট
        document.getElementById('logout-btn').addEventListener('click', handleLogout);
        
        // প্রোডাক্ট মডাল
        document.getElementById('add-color-btn').addEventListener('click', addColorField);
        document.getElementById('cancel-product-btn').addEventListener('click', hideProductModal);
        document.getElementById('product-form').addEventListener('submit', handleProductSubmit);
        
        // প্রাইস ক্যালকুলেশন
        document.getElementById('regular-price').addEventListener('input', calculateDiscount);
        document.getElementById('offer-price').addEventListener('input', calculateDiscount);
        
        // প্রোডাক্ট স্ট্যাটাস
        document.getElementById('product-status').addEventListener('change', function() {
            document.getElementById('product-status-text').textContent = this.checked ? 'সক্রিয়' : 'নিষ্ক্রিয়';
        });
        
        // ক্যাটাগরি চেঞ্জ - ফিটনেস প্রোডাক্টের জন্য ফিচার দেখান
        document.getElementById('product-category').addEventListener('change', function() {
            const fitnessContainer = document.getElementById('fitness-features-container');
            fitnessContainer.style.display = this.value === 'fitness' ? 'block' : 'none';
            
            const sizeInput = document.getElementById('product-size');
            if (this.value === 'fitness') {
                sizeInput.placeholder = 'One Size';
            } else {
                sizeInput.placeholder = 'S, M, L, XL, XXL';
            }
        });
        
        // ফিচার যোগ করুন
        document.getElementById('add-feature-btn')?.addEventListener('click', function() {
            const container = document.getElementById('features-list');
            const div = document.createElement('div');
            div.className = 'flex items-center';
            div.innerHTML = `
                <input type="text" placeholder="ফিচার" class="form-input flex-1">
                <button type="button" class="ml-2 text-red-600 remove-feature"><i class="fas fa-times"></i></button>
            `;
            container.appendChild(div);
        });
        
        // ফিচার রিমুভ
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-feature') || e.target.closest('.remove-feature')) {
                const btn = e.target.closest('.remove-feature');
                btn.closest('.flex.items-center')?.remove();
            }
        });
        
        // স্লাইডার মডাল
        document.getElementById('cancel-slider-btn').addEventListener('click', hideSliderModal);
        document.getElementById('slider-form').addEventListener('submit', handleSliderSubmit);
        
        // স্লাইডার ট্যাব
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // স্লাইডার URL প্রিভিউ
        document.getElementById('slider-image-url').addEventListener('input', function() {
            const preview = document.getElementById('slider-url-preview');
            if (this.value) {
                preview.src = this.value;
                preview.classList.add('show');
            } else {
                preview.classList.remove('show');
            }
        });
        
        // স্লাইডার ফাইল আপলোড
        document.getElementById('slider-image-upload').addEventListener('click', () => {
            document.getElementById('slider-image-file').click();
        });
        
        document.getElementById('slider-image-file').addEventListener('change', handleSliderImageUpload);
        
        // স্লাইডার স্ট্যাটাস
        document.getElementById('slider-status').addEventListener('change', function() {
            document.getElementById('slider-status-text').textContent = this.checked ? 'সক্রিয়' : 'নিষ্ক্রিয়';
        });
        
        // অর্ডার মডাল
        document.getElementById('cancel-order-btn').addEventListener('click', hideOrderModal);
        document.getElementById('update-order-btn').addEventListener('click', updateOrderStatus);
        
        // নোটিফিকেশন
        document.getElementById('notification-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('notification-dropdown').classList.toggle('show');
        });
        
        document.getElementById('mobile-notification-btn').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('mobile-notification-dropdown').classList.toggle('show');
        });
        
        document.getElementById('mark-all-read')?.addEventListener('click', markAllAsRead);
        document.getElementById('mobile-mark-all-read')?.addEventListener('click', markAllAsRead);
        
        // ক্লিক আউটসাইড - নোটিফিকেশন বন্ধ
        document.addEventListener('click', function(e) {
            const desktopDropdown = document.getElementById('notification-dropdown');
            const mobileDropdown = document.getElementById('mobile-notification-dropdown');
            const notifBtn = document.getElementById('notification-btn');
            const mobileNotifBtn = document.getElementById('mobile-notification-btn');
            
            if (desktopDropdown?.classList.contains('show') && 
                !notifBtn?.contains(e.target) && !desktopDropdown.contains(e.target)) {
                desktopDropdown.classList.remove('show');
            }
            
            if (mobileDropdown?.classList.contains('show') && 
                !mobileNotifBtn?.contains(e.target) && !mobileDropdown.contains(e.target)) {
                mobileDropdown.classList.remove('show');
            }
        });
        
        // Escape কী - সব মডাল বন্ধ
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                hideAllModals();
                document.querySelectorAll('.notification-dropdown.show').forEach(d => d.classList.remove('show'));
            }
        });
    }
    
    // ============================================
    // লগইন/লগআউট ফাংশন
    // ============================================
    
    async function handleLogin(e) {
        e.preventDefault();
        
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const loginBtn = document.getElementById('login-btn');
        
        loginBtn.innerHTML = '<div class="loading mr-2"></div> লগইন হচ্ছে...';
        loginBtn.disabled = true;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });
            
            if (response.ok) {
                const data = await response.json();
                currentUser = { username: data.username };
                localStorage.setItem('admin_user', JSON.stringify(currentUser));
                showAdminPanel();
                loadDashboard();
                document.getElementById('login-error').classList.add('hidden');
                showNotification('লগইন সফল!', 'success');
                startNotificationPolling();
            } else {
                throw new Error('Invalid credentials');
            }
        } catch (error) {
            document.getElementById('login-error').classList.remove('hidden');
            document.getElementById('login-error-text').textContent = error.message;
        } finally {
            loginBtn.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i>লগইন করুন';
            loginBtn.disabled = false;
        }
    }
    
    function handleLogout() {
        if (confirm('আপনি কি লগআউট করতে চান?')) {
            localStorage.removeItem('admin_user');
            currentUser = null;
            adminPanel.classList.add('hidden');
            loginPage.classList.remove('hidden');
            
            if (notificationInterval) {
                clearInterval(notificationInterval);
                notificationInterval = null;
            }
            
            showNotification('লগআউট করা হয়েছে', 'info');
        }
    }
    
    function showAdminPanel() {
        loginPage.classList.add('hidden');
        adminPanel.classList.remove('hidden');
        document.getElementById('logged-in-user').textContent = currentUser?.username || 'admin';
    }
    
    // ============================================
    // নেভিগেশন ফাংশন
    // ============================================
    
    function handleNavigation(e) {
        e.preventDefault();
        const page = this.dataset.page;
        switchPage(page);
        
        if (window.innerWidth < 768) {
            toggleMobileMenu();
        }
    }
    
    function switchPage(page) {
        currentPage = page;
        
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.page === page) item.classList.add('active');
        });
        
        const titles = {
            dashboard: 'ড্যাশবোর্ড', products: 'পণ্য ব্যবস্থাপনা',
            orders: 'অর্ডার ব্যবস্থাপনা', reviews: 'রিভিউ ব্যবস্থাপনা',
            sliders: 'স্লাইডার ব্যবস্থাপনা', settings: 'ওয়েবসাইট সেটিংস'
        };
        
        const subtitles = {
            dashboard: 'সর্বশেষ আপডেট এবং পরিসংখ্যান',
            products: 'আপনার পণ্য তালিকা পরিচালনা করুন',
            orders: 'গ্রাহকদের অর্ডার তালিকা এবং স্ট্যাটাস',
            reviews: 'গ্রাহকদের রিভিউ এবং রেটিং',
            sliders: 'হোমপেজ স্লাইডার ইমেজ এবং কন্টেন্ট',
            settings: 'ওয়েবসাইটের সাধারণ সেটিংস কনফিগারেশন'
        };
        
        document.getElementById('page-title').textContent = titles[page];
        document.getElementById('page-subtitle').textContent = subtitles[page];
        
        loadPageContent(page);
    }
    
    // ============================================
    // পেজ কন্টেন্ট লোড
    // ============================================
    
    async function loadPageContent(page) {
        contentArea.innerHTML = '<div class="text-center p-8"><div class="loading mx-auto"></div><p class="mt-2">লোড হচ্ছে...</p></div>';
        
        try {
            let html = '';
            
            switch(page) {
                case 'dashboard': html = await loadDashboardContent(); break;
                case 'products': html = await loadProductsContent(); break;
                case 'orders': html = await loadOrdersContent(); break;
                case 'reviews': html = await loadReviewsContent(); break;
                case 'sliders': html = await loadSlidersContent(); break;
                case 'settings': html = await loadSettingsContent(); break;
            }
            
            contentArea.innerHTML = html;
            setupPageEventListeners(page);
            
        } catch (error) {
            console.error('Error loading page:', error);
            contentArea.innerHTML = `
                <div class="text-center p-8 text-red-500">
                    <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                    <p>পৃষ্ঠা লোড করতে সমস্যা হয়েছে</p>
                    <button onclick="loadPageContent('${page}')" class="mt-4 text-blue-600">আবার চেষ্টা করুন</button>
                </div>
            `;
        }
    }
    
    async function loadDashboardContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/dashboard/stats`);
            
            if (!response.ok) throw new Error('Failed to load dashboard');
            
            const data = await response.json();
            
            document.getElementById('stats-cards').innerHTML = `
                <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-500 text-sm">মোট অর্ডার</p>
                            <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalOrders || 0}</p>
                        </div>
                        <div class="text-red-600 bg-red-50 p-2 md:p-3 rounded-lg">
                            <i class="fas fa-shopping-cart text-xl md:text-2xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <p class="text-yellow-600 text-sm">
                            <i class="fas fa-clock mr-1"></i>${data.pendingOrders || 0} পেন্ডিং
                        </p>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-500 text-sm">মোট আয়</p>
                            <p class="text-2xl md:text-3xl font-bold mt-2">${(data.totalRevenue || 0).toLocaleString('bn-BD')}</p>
                            <p class="text-gray-500 text-sm">টাকা</p>
                        </div>
                        <div class="text-green-600 bg-green-50 p-2 md:p-3 rounded-lg">
                            <i class="fas fa-money-bill-wave text-xl md:text-2xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <p class="text-green-600 text-sm">
                            <i class="fas fa-check-circle mr-1"></i>${data.deliveredOrders || 0} ডেলিভার্ড
                        </p>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-500 text-sm">মোট পণ্য</p>
                            <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalProducts || 0}</p>
                        </div>
                        <div class="text-blue-600 bg-blue-50 p-2 md:p-3 rounded-lg">
                            <i class="fas fa-tshirt text-xl md:text-2xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <p class="text-blue-600 text-sm"><i class="fas fa-box-open mr-1"></i>সক্রিয় পণ্য</p>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-gray-500 text-sm">মোট রিভিউ</p>
                            <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalReviews || 0}</p>
                        </div>
                        <div class="text-yellow-600 bg-yellow-50 p-2 md:p-3 rounded-lg">
                            <i class="fas fa-star text-xl md:text-2xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <p class="text-red-600 text-sm">
                            <i class="fas fa-hourglass-half mr-1"></i>${data.pendingReviews || 0} পেন্ডিং
                        </p>
                    </div>
                </div>
            `;
            
            let recentOrdersHTML = '';
            if (data.recentOrders && data.recentOrders.length > 0) {
                recentOrdersHTML = data.recentOrders.map(order => `
                    <tr>
                        <td class="font-mono text-sm">${order.orderId || 'N/A'}</td>
                        <td>${order.customerName || 'N/A'}</td>
                        <td class="truncate max-w-xs">${order.productName || 'N/A'}</td>
                        <td>${order.totalPrice || 0} টাকা</td>
                        <td>
                            <span class="order-status status-${order.status || 'pending'}">
                                ${getStatusText(order.status)}
                            </span>
                        </td>
                        <td class="text-sm">${formatDate(order.createdAt)}</td>
                    </tr>
                `).join('');
            } else {
                recentOrdersHTML = '<tr><td colspan="6" class="p-8 text-center text-gray-500">কোনো অর্ডার পাওয়া যায়নি</td></tr>';
            }
            
            document.getElementById('recent-orders-table').innerHTML = recentOrdersHTML;
            
            return document.getElementById('dashboard-page').innerHTML;
            
        } catch (error) {
            console.error('Error loading dashboard:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>ড্যাশবোর্ড লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    async function loadProductsContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/products`);
            if (!response.ok) throw new Error('Failed to load products');
            
            const products = await response.json();
            
            return `
                <div id="products-page" class="page-content">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                        <div class="p-6 border-b">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                <div>
                                    <h2 class="text-xl font-bold flex items-center">
                                        <i class="fas fa-tshirt mr-3 text-blue-500"></i>পণ্য ব্যবস্থাপনা
                                    </h2>
                                    <p class="text-gray-600 text-sm mt-1">আপনার পণ্য তালিকা পরিচালনা করুন</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button onclick="loadPageContent('products')" class="btn btn-outline flex items-center">
                                        <i class="fas fa-sync mr-2"></i>রিফ্রেশ
                                    </button>
                                    <button onclick="showAddProductModal()" class="btn btn-primary flex items-center">
                                        <i class="fas fa-plus mr-2"></i>নতুন পণ্য
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>পণ্যের নাম</th>
                                            <th>ছবি</th>
                                            <th>ক্যাটাগরি</th>
                                            <th>দাম</th>
                                            <th>ছাড়</th>
                                            <th>সাইজ</th>
                                            <th>স্ট্যাটাস</th>
                                            <th>ক্রিয়া</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${products && products.length > 0 ? products.map(product => {
                                            const firstImage = product.colors?.[0]?.image || 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=800';
                                            const categoryName = {
                                                panjabi: 'পাঞ্জাবி', tshirt: 'টি-শার্ট',
                                                'three-piece': 'থ্রি পিজ', fitness: 'ফিটনেস'
                                            }[product.category] || product.category;
                                            
                                            return `
                                                <tr>
                                                    <td class="font-medium">${product.name}</td>
                                                    <td><img src="${firstImage}" class="w-12 h-12 object-cover rounded-lg"></td>
                                                    <td>${categoryName}</td>
                                                    <td>
                                                        <span class="line-through text-gray-500 text-sm">${product.regularPrice} টাকা</span><br>
                                                        <span class="text-red-600 font-bold">${product.offerPrice} টাকা</span>
                                                    </td>
                                                    <td>${product.offerPercentage}%</td>
                                                    <td>${product.size}</td>
                                                    <td>
                                                        <span class="badge ${product.isActive ? 'badge-success' : 'badge-danger'}">
                                                            ${product.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়'}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="flex space-x-2">
                                                            <button onclick="editProduct('${product._id}')" class="text-blue-600 hover:text-blue-800 p-1" title="এডিট">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button onclick="deleteProduct('${product._id}')" class="text-red-600 hover:text-red-800 p-1" title="ডিলিট">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('') : 
                                        '<tr><td colspan="8" class="p-8 text-center text-gray-500">কোনো পণ্য পাওয়া যায়নি</td></tr>'}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading products:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>পণ্য লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    async function loadOrdersContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/orders`);
            if (!response.ok) throw new Error('Failed to load orders');
            
            const data = await response.json();
            const orders = data.orders || [];
            
            return `
                <div id="orders-page" class="page-content">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                        <div class="p-6 border-b">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                <div>
                                    <h2 class="text-xl font-bold flex items-center">
                                        <i class="fas fa-shopping-cart mr-3 text-green-500"></i>অর্ডার ব্যবস্থাপনা
                                    </h2>
                                    <p class="text-gray-600 text-sm mt-1">গ্রাহকদের অর্ডার তালিকা এবং স্ট্যাটাস</p>
                                </div>
                                <div class="flex space-x-3">
                                    <select id="order-filter" class="form-input w-48">
                                        <option value="">সব অর্ডার</option>
                                        <option value="pending">পেন্ডিং</option>
                                        <option value="confirmed">কনফার্মড</option>
                                        <option value="processing">প্রসেসিং</option>
                                        <option value="shipped">শিপড</option>
                                        <option value="delivered">ডেলিভার্ড</option>
                                        <option value="cancelled">ক্যান্সেলড</option>
                                    </select>
                                    <button onclick="loadPageContent('orders')" class="btn btn-outline flex items-center">
                                        <i class="fas fa-sync mr-2"></i>রিফ্রেশ
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>অর্ডার আইডি</th>
                                            <th>গ্রাহক</th>
                                            <th>পণ্য</th>
                                            <th>পরিমাণ</th>
                                            <th>মোট</th>
                                            <th>স্ট্যাটাস</th>
                                            <th>তারিখ</th>
                                            <th>ক্রিয়া</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${orders.length > 0 ? orders.map(order => `
                                            <tr>
                                                <td class="font-mono text-sm">${order.orderId}</td>
                                                <td>
                                                    <div class="font-medium">${order.customerName}</div>
                                                    <div class="text-sm text-gray-500">${order.phone}</div>
                                                </td>
                                                <td>${order.productName}</td>
                                                <td>${order.quantity} পিস</td>
                                                <td>${order.totalPrice} টাকা</td>
                                                <td>
                                                    <span class="order-status status-${order.status}">
                                                        ${getStatusText(order.status)}
                                                    </span>
                                                </td>
                                                <td class="text-sm">${formatDate(order.createdAt)}</td>
                                                <td>
                                                    <button onclick="viewOrder('${order._id}')" class="text-blue-600 hover:text-blue-800 p-1" title="বিস্তারিত">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        `).join('') : 
                                        '<tr><td colspan="8" class="p-8 text-center text-gray-500">কোনো অর্ডার পাওয়া যায়নি</td></tr>'}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading orders:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>অর্ডার লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    async function loadReviewsContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/reviews`);
            if (!response.ok) throw new Error('Failed to load reviews');
            
            const reviews = await response.json();
            
            return `
                <div id="reviews-page" class="page-content">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                        <div class="p-6 border-b">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                <div>
                                    <h2 class="text-xl font-bold flex items-center">
                                        <i class="fas fa-star mr-3 text-yellow-500"></i>রিভিউ ব্যবস্থাপনা
                                    </h2>
                                    <p class="text-gray-600 text-sm mt-1">গ্রাহকদের রিভিউ এবং রেটিং</p>
                                </div>
                                <div class="flex space-x-3">
                                    <select id="review-filter" class="form-input w-48">
                                        <option value="">সব রিভিউ</option>
                                        <option value="approved">এপ্রুভড</option>
                                        <option value="pending">পেন্ডিং</option>
                                    </select>
                                    <button onclick="loadPageContent('reviews')" class="btn btn-outline flex items-center">
                                        <i class="fas fa-sync mr-2"></i>রিফ্রেশ
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            ${reviews.length > 0 ? reviews.map(review => `
                                <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:bg-gray-50">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h4 class="font-bold text-lg">${review.name}</h4>
                                            <p class="text-gray-600 text-sm">
                                                <i class="fas fa-map-marker-alt mr-1"></i>${review.location}
                                                • <i class="far fa-clock mr-1"></i>${formatDate(review.createdAt)}
                                            </p>
                                        </div>
                                        <div class="text-yellow-500">
                                            ${getStarRatingHTML(review.rating)}
                                        </div>
                                    </div>
                                    <p class="text-gray-700 mb-4 bg-gray-50 p-3 rounded">${review.text}</p>
                                    <div class="flex justify-between items-center">
                                        <span class="badge ${review.isApproved ? 'badge-success' : 'badge-warning'}">
                                            <i class="fas ${review.isApproved ? 'fa-check-circle' : 'fa-clock'} mr-1"></i>
                                            ${review.isApproved ? 'এপ্রুভড' : 'পেন্ডিং'}
                                        </span>
                                        <div>
                                            ${!review.isApproved ? `
                                                <button onclick="approveReview('${review._id}')" class="btn btn-outline text-sm">
                                                    <i class="fas fa-check mr-1"></i> এপ্রুভ
                                                </button>
                                            ` : ''}
                                            <button onclick="deleteReview('${review._id}')" class="btn btn-outline text-sm ml-2">
                                                <i class="fas fa-trash mr-1"></i> ডিলিট
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('') : 
                            '<div class="text-center p-8 text-gray-500">কোনো রিভিউ পাওয়া যায়নি</div>'}
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading reviews:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>রিভিউ লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    async function loadSlidersContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/sliders`);
            if (!response.ok) throw new Error('Failed to load sliders');
            
            const sliders = await response.json();
            
            return `
                <div id="sliders-page" class="page-content">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                        <div class="p-6 border-b">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                <div>
                                    <h2 class="text-xl font-bold flex items-center">
                                        <i class="fas fa-images mr-3 text-purple-500"></i>স্লাইডার ব্যবস্থাপনা
                                    </h2>
                                    <p class="text-gray-600 text-sm mt-1">হোমপেজ স্লাইডার ইমেজ এবং কন্টেন্ট</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button onclick="loadPageContent('sliders')" class="btn btn-outline flex items-center">
                                        <i class="fas fa-sync mr-2"></i>রিফ্রেশ
                                    </button>
                                    <button onclick="showAddSliderModal()" class="btn btn-primary flex items-center">
                                        <i class="fas fa-plus mr-2"></i>নতুন স্লাইডার
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            ${sliders.length > 0 ? sliders.map(slider => `
                                <div class="border border-gray-200 rounded-lg p-6 mb-6 hover:shadow-md">
                                    <div class="flex justify-between items-start mb-4">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 mr-3">
                                                <i class="fas fa-image"></i>
                                            </div>
                                            <div>
                                                <h3 class="font-bold">স্লাইড #${slider.slideNumber}</h3>
                                                <p class="text-gray-600 text-sm">${slider.title} - ${slider.subtitle}</p>
                                            </div>
                                        </div>
                                        <label class="inline-flex items-center cursor-pointer">
                                            <input type="checkbox" ${slider.isActive ? 'checked' : ''} 
                                                   onchange="toggleSlider('${slider._id}', this.checked)" class="sr-only peer">
                                            <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                            <span class="ml-3 text-sm font-medium">সক্রিয়</span>
                                        </label>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <img src="${slider.imageUrl}" alt="Slider ${slider.slideNumber}" 
                                                 class="w-full h-48 object-cover rounded-lg shadow">
                                        </div>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="form-label">শিরোনাম</label>
                                                <input type="text" value="${slider.title}" 
                                                       onchange="updateSliderField('${slider._id}', 'title', this.value)"
                                                       class="form-input text-sm">
                                            </div>
                                            <div>
                                                <label class="form-label">সাবটাইটেল</label>
                                                <input type="text" value="${slider.subtitle}" 
                                                       onchange="updateSliderField('${slider._id}', 'subtitle', this.value)"
                                                       class="form-input text-sm">
                                            </div>
                                            <div>
                                                <button onclick="editSlider('${slider._id}')" class="btn btn-outline w-full text-sm">
                                                    <i class="fas fa-edit mr-1"></i> সম্পাদনা
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('') : 
                            '<div class="text-center p-8 text-gray-500">কোনো স্লাইডার পাওয়া যায়নি</div>'}
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading sliders:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>স্লাইডার লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    async function loadSettingsContent() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/settings`);
            if (!response.ok) throw new Error('Failed to load settings');
            
            const settings = await response.json();
            
            return `
                <div id="settings-page" class="page-content">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                        <div class="p-6 border-b">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h2 class="text-xl font-bold flex items-center">
                                        <i class="fas fa-cog mr-3 text-gray-500"></i>ওয়েবসাইট সেটিংস
                                    </h2>
                                    <p class="text-gray-600 text-sm mt-1">ওয়েবসাইটের সাধারণ সেটিংস কনফিগারেশন</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <form id="settings-form" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-whatsapp mr-2 text-green-500"></i>ওয়াটসঅ্যাপ নাম্বার
                                        </label>
                                        <input type="text" id="whatsapp-number" class="form-input"
                                               value="${settings.whatsappNumber || '01911465879'}">
                                    </div>
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-phone-alt mr-2 text-blue-500"></i>ফোন নাম্বার
                                        </label>
                                        <input type="text" id="phone-number" class="form-input"
                                               value="${settings.phoneNumber || '01911465879'}">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label">
                                        <i class="fas fa-file-alt mr-2 text-gray-500"></i>ফুটার টেক্সট
                                    </label>
                                    <textarea id="footer-text" rows="3" class="form-textarea">${settings.footerText || 'প্রিমিয়াম পাঞ্জাবি, টি-শার্ট, থ্রি পিজ ও ফিটনেস পরিধানের নির্ভরযোগ্য ঠিকানা'}</textarea>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-truck mr-2 text-green-500"></i>ঢাকার ভিতরে ডেলিভারি চার্জ
                                        </label>
                                        <input type="number" id="delivery-inside" class="form-input"
                                               value="${settings.deliveryChargeInsideDhaka || 60}">
                                    </div>
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-truck-moving mr-2 text-red-500"></i>ঢাকার বাইরে ডেলিভারি চার্জ
                                        </label>
                                        <input type="number" id="delivery-outside" class="form-input"
                                               value="${settings.deliveryChargeOutsideDhaka || 160}">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-tshirt mr-2 text-purple-500"></i>হোমপেজ শিরোনাম
                                        </label>
                                        <input type="text" id="home-page-title" class="form-input"
                                               value="${settings.homePageTitle || 'আমাদের কালেকশн'}">
                                    </div>
                                    <div>
                                        <label class="form-label">
                                            <i class="fas fa-shopping-cart mr-2 text-red-500"></i>অর্ডার ফর্ম শিরোনাম
                                        </label>
                                        <input type="text" id="order-form-title" class="form-input"
                                               value="${settings.orderFormTitle || 'পণ্য অর্ডার ফর্ম'}">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="form-label">
                                        <i class="fas fa-clock mr-2 text-yellow-500"></i>সার্ভিস সময়
                                    </label>
                                    <input type="text" id="service-hours" class="form-input"
                                           value="${settings.serviceHours || 'সকাল ৯টা - রাত ১০টা'}">
                                </div>
                                
                                <div class="pt-4 border-t">
                                    <button type="submit" class="btn btn-primary flex items-center">
                                        <i class="fas fa-save mr-2"></i>সেটিংস সেভ করুন
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        } catch (error) {
            console.error('Error loading settings:', error);
            return '<div class="text-center p-8 text-red-500"><i class="fas fa-exclamation-triangle text-2xl mb-4"></i><p>সেটিংস লোড করতে সমস্যা হয়েছে</p></div>';
        }
    }
    
    function setupPageEventListeners(page) {
        if (page === 'orders') {
            const filter = document.getElementById('order-filter');
            if (filter) filter.addEventListener('change', filterOrders);
        }
        
        if (page === 'reviews') {
            const filter = document.getElementById('review-filter');
            if (filter) filter.addEventListener('change', filterReviews);
        }
        
        if (page === 'settings') {
            const form = document.getElementById('settings-form');
            if (form) form.addEventListener('submit', handleSettingsSubmit);
        }
    }
    
    // ============================================
    // প্রোডাক্ট ফাংশন
    // ============================================
    
    function showAddProductModal() {
        document.getElementById('product-modal-title').textContent = 'নতুন পণ্য যোগ করুন';
        document.getElementById('product-id').value = '';
        document.getElementById('product-form').reset();
        document.getElementById('product-status').checked = true;
        document.getElementById('product-status-text').textContent = 'সক্রিয়';
        document.getElementById('colors-container').innerHTML = '';
        document.getElementById('fitness-features-container').style.display = 'none';
        addColorField();
        calculateDiscount();
        document.getElementById('product-modal').classList.add('active');
    }
    
    function hideProductModal() {
        document.getElementById('product-modal').classList.remove('active');
    }
    
    function addColorField() {
        const container = document.getElementById('colors-container');
        const index = container.children.length;
        
        const div = document.createElement('div');
        div.className = 'border border-gray-200 rounded-lg p-4';
        div.innerHTML = `
            <div class="flex justify-between items-center mb-3">
                <span class="font-medium flex items-center">
                    <i class="fas fa-palette mr-2"></i>রং #${index + 1}
                </span>
                ${index > 0 ? `
                <button type="button" onclick="this.parentElement.parentElement.remove()" 
                        class="text-red-600 hover:text-red-800 p-1">
                    <i class="fas fa-times"></i>
                </button>` : ''}
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                    <label class="form-label">রং এর নাম *</label>
                    <input type="text" name="color-name" required class="form-input text-sm" placeholder="লাল ও সোনালী">
                </div>
                <div>
                    <label class="form-label">রং কোড *</label>
                    <input type="text" name="color-code" required class="form-input text-sm" placeholder="#dc2626" value="#dc2626">
                </div>
            </div>
            
            <div>
                <label class="form-label">ইমেজ</label>
                <div class="tab-container">
                    <button type="button" class="tab-btn active" data-tab="color-url-tab-${index}">URL লিংক</button>
                    <button type="button" class="tab-btn" data-tab="color-upload-tab-${index}">ফাইল আপলোড</button>
                </div>
                
                <div id="color-url-tab-${index}" class="tab-content active">
                    <input type="text" name="color-image-url" class="form-input text-sm" placeholder="https://example.com/image.jpg">
                    <input type="hidden" name="color-image-base64">
                    <img name="color-url-preview" class="color-image-preview mt-2 w-20 h-20 object-cover rounded-lg" style="display: none;">
                </div>
                
                <div id="color-upload-tab-${index}" class="tab-content">
                    <div class="color-image-upload border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-blue-500" id="color-image-upload-${index}">
                        <div class="text-center">
                            <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                            <p class="font-medium text-sm">ছবি আপলোড করুন</p>
                            <p class="text-gray-500 text-xs mt-1">PNG, JPG, JPEG, WEBP</p>
                            <input type="file" name="color-image-file" accept="image/*" class="hidden">
                        </div>
                        <img name="color-upload-preview" class="w-20 h-20 object-cover rounded-lg mt-2" style="display: none;">
                    </div>
                </div>
            </div>
        `;
        
        container.appendChild(div);
        setupColorUploadHandlers(div, index);
    }
    
    function setupColorUploadHandlers(container, index) {
        // ট্যাব সুইচ
        container.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const parent = this.closest('.tab-container').parentElement;
                parent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                parent.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                parent.querySelector(`#${this.dataset.tab}`).classList.add('active');
            });
        });
        
        // URL প্রিভিউ
        const urlInput = container.querySelector('[name="color-image-url"]');
        urlInput?.addEventListener('input', function() {
            const preview = container.querySelector('[name="color-url-preview"]');
            if (this.value) {
                preview.src = this.value;
                preview.style.display = 'block';
            } else {
                preview.style.display = 'none';
            }
        });
        
        // ফাইল আপলোড
        const uploadContainer = container.querySelector(`#color-image-upload-${index}`);
        uploadContainer?.addEventListener('click', () => {
            container.querySelector('[name="color-image-file"]').click();
        });
        
        const fileInput = container.querySelector('[name="color-image-file"]');
        fileInput?.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('শুধুমাত্র ইমেজ ফাইল নির্বাচন করুন');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('ফাইল সাইজ 5MB এর কম হতে হবে');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = container.querySelector('[name="color-upload-preview"]');
                preview.src = e.target.result;
                preview.style.display = 'block';
                uploadContainer.classList.add('has-image');
                
                const base64Input = container.querySelector('[name="color-image-base64"]');
                base64Input.value = e.target.result;
            };
            reader.readAsDataURL(file);
        });
    }
    
    function calculateDiscount() {
        const regular = parseFloat(document.getElementById('regular-price').value) || 0;
        const offer = parseFloat(document.getElementById('offer-price').value) || 0;
        
        if (regular > 0 && offer > 0 && regular >= offer) {
            const discount = ((regular - offer) / regular) * 100;
            document.getElementById('offer-percentage').value = Math.round(discount);
        } else {
            document.getElementById('offer-percentage').value = 0;
        }
    }
    
    async function handleProductSubmit(e) {
        e.preventDefault();
        
        const btn = document.getElementById('save-product-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
        btn.disabled = true;
        
        const productId = document.getElementById('product-id').value;
        const colors = [];
        
        document.querySelectorAll('#colors-container > div').forEach(container => {
            const name = container.querySelector('[name="color-name"]')?.value;
            const code = container.querySelector('[name="color-code"]')?.value;
            const imageUrl = container.querySelector('[name="color-image-url"]')?.value;
            const imageBase64 = container.querySelector('[name="color-image-base64"]')?.value;
            
            if (!name || !code) return;
            
            const colorData = { name, code };
            
            if (imageBase64) {
                colorData.imageFile = imageBase64;
            } else if (imageUrl) {
                colorData.image = imageUrl;
            } else {
                colorData.image = 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=800';
            }
            
            colors.push(colorData);
        });
        
        if (colors.length === 0) {
            showNotification('অন্তত একটি রং যোগ করুন', 'error');
            btn.innerHTML = originalText;
            btn.disabled = false;
            return;
        }
        
        const category = document.getElementById('product-category').value;
        const productData = {
            name: document.getElementById('product-name').value,
            description: document.getElementById('product-description').value,
            category: category,
            colors: colors,
            size: document.getElementById('product-size').value,
            regularPrice: parseFloat(document.getElementById('regular-price').value),
            offerPrice: parseFloat(document.getElementById('offer-price').value),
            offerPercentage: parseFloat(document.getElementById('offer-percentage').value),
            isActive: document.getElementById('product-status').checked
        };
        
        // ফিটনেস প্রোডাক্টের জন্য ফিচার
        if (category === 'fitness') {
            productData.hasVariants = false;
            const features = [];
            document.querySelectorAll('#features-list input').forEach(input => {
                if (input.value.trim()) features.push(input.value.trim());
            });
            if (features.length > 0) productData.features = features;
        }
        
        try {
            const url = productId 
                ? `${API_BASE_URL}/api/admin/products/${productId}` 
                : `${API_BASE_URL}/api/admin/products`;
            
            const method = productId ? 'PUT' : 'POST';
            
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(productData)
            });
            
            if (response.ok) {
                hideProductModal();
                loadPageContent('products');
                showNotification('পণ্য সেভ হয়েছে!', 'success');
            } else {
                const error = await response.json();
                throw new Error(error.error || 'Failed to save');
            }
        } catch (error) {
            console.error('Error saving product:', error);
            showNotification('পণ্য সেভ করতে সমস্যা: ' + error.message, 'error');
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    }
    
    async function editProduct(productId) {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/products`);
            if (!response.ok) throw new Error('Failed to load products');
            
            const products = await response.json();
            const product = products.find(p => p._id === productId);
            
            if (product) {
                document.getElementById('product-modal-title').textContent = 'পণ্য সম্পাদনা';
                document.getElementById('product-id').value = product._id;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-description').value = product.description;
                document.getElementById('product-category').value = product.category || 'panjabi';
                document.getElementById('product-size').value = product.size;
                document.getElementById('regular-price').value = product.regularPrice;
                document.getElementById('offer-price').value = product.offerPrice;
                document.getElementById('offer-percentage').value = product.offerPercentage;
                document.getElementById('product-status').checked = product.isActive;
                document.getElementById('product-status-text').textContent = product.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                
                // ফিটনেস প্রোডাক্টের জন্য ফিচার
                if (product.category === 'fitness') {
                    document.getElementById('fitness-features-container').style.display = 'block';
                    const featuresList = document.getElementById('features-list');
                    featuresList.innerHTML = '';
                    
                    if (product.features && product.features.length > 0) {
                        product.features.forEach(feature => {
                            const div = document.createElement('div');
                            div.className = 'flex items-center';
                            div.innerHTML = `
                                <input type="text" value="${feature}" class="form-input flex-1">
                                <button type="button" class="ml-2 text-red-600 remove-feature"><i class="fas fa-times"></i></button>
                            `;
                            featuresList.appendChild(div);
                        });
                    }
                } else {
                    document.getElementById('fitness-features-container').style.display = 'none';
                }
                
                // কালার লোড
                document.getElementById('colors-container').innerHTML = '';
                if (product.colors && product.colors.length > 0) {
                    product.colors.forEach((color, i) => {
                        addColorField();
                        const lastContainer = document.querySelector('#colors-container > div:last-child');
                        lastContainer.querySelector('[name="color-name"]').value = color.name;
                        lastContainer.querySelector('[name="color-code"]').value = color.code;
                        
                        if (color.image) {
                            const urlInput = lastContainer.querySelector('[name="color-image-url"]');
                            urlInput.value = color.image;
                            const preview = lastContainer.querySelector('[name="color-url-preview"]');
                            preview.src = color.image;
                            preview.style.display = 'block';
                        }
                    });
                } else {
                    addColorField();
                }
                
                calculateDiscount();
                document.getElementById('product-modal').classList.add('active');
            }
        } catch (error) {
            console.error('Error editing product:', error);
            showNotification('পণ্য লোড করতে সমস্যা!', 'error');
        }
    }
    
    async function deleteProduct(productId) {
        if (!confirm('আপনি কি নিশ্চিত এই পণ্য ডিলিট করতে চান?')) return;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/products/${productId}`, {
                method: 'DELETE'
            });
            
            if (response.ok) {
                loadPageContent('products');
                showNotification('পণ্য ডিলিট হয়েছে!', 'success');
            } else {
                throw new Error('Failed to delete');
            }
        } catch (error) {
            console.error('Error deleting product:', error);
            showNotification('পণ্য ডিলিট করতে সমস্যা!', 'error');
        }
    }
    
    // ============================================
    // স্লাইডার ফাংশন
    // ============================================
    
    function showAddSliderModal() {
        document.getElementById('slider-modal-title').textContent = 'নতুন স্লাইডার যোগ করুন';
        document.getElementById('slider-id').value = '';
        document.getElementById('slider-form').reset();
        document.getElementById('slider-status').checked = true;
        document.getElementById('slider-status-text').textContent = 'সক্রিয়';
        document.getElementById('slider-image-upload').classList.remove('has-image');
        document.getElementById('slider-upload-preview').classList.remove('show');
        document.getElementById('slider-url-preview').classList.remove('show');
        document.getElementById('slider-modal').classList.add('active');
        
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelector('.tab-btn[data-tab="url-tab"]').classList.add('active');
        document.getElementById('url-tab').classList.add('active');
    }
    
    function hideSliderModal() {
        document.getElementById('slider-modal').classList.remove('active');
    }
    
    function handleSliderImageUpload(e) {
        const file = e.target.files[0];
        if (!file) return;
        
        if (!file.type.startsWith('image/')) {
            showNotification('শুধুমাত্র ইমেজ ফাইল নির্বাচন করুন', 'error');
            return;
        }
        
        if (file.size > 5 * 1024 * 1024) {
            showNotification('ফাইল সাইজ 5MB এর কম হতে হবে', 'error');
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            const preview = document.getElementById('slider-upload-preview');
            preview.src = e.target.result;
            preview.classList.add('show');
            document.getElementById('slider-image-upload').classList.add('has-image');
            document.getElementById('slider-image-base64').value = e.target.result;
        };
        reader.readAsDataURL(file);
    }
    
    async function handleSliderSubmit(e) {
        e.preventDefault();
        
        const btn = document.getElementById('save-slider-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
        btn.disabled = true;
        
        const sliderId = document.getElementById('slider-id').value;
        const activeTab = document.querySelector('.tab-content.active');
        
        let imageData = {};
        
        if (activeTab.id === 'url-tab') {
            const imageUrl = document.getElementById('slider-image-url').value;
            if (!imageUrl) {
                showNotification('স্লাইডার ইমেজ URL দিন', 'error');
                btn.innerHTML = originalText;
                btn.disabled = false;
                return;
            }
            imageData.imageUrl = imageUrl;
        } else {
            const base64 = document.getElementById('slider-image-base64').value;
            if (!base64) {
                showNotification('স্লাইডার ইমেজ ফাইল নির্বাচন করুন', 'error');
                btn.innerHTML = originalText;
                btn.disabled = false;
                return;
            }
            imageData.imageFile = base64;
        }
        
        const sliderData = {
            slideNumber: parseInt(document.getElementById('slider-number').value),
            title: document.getElementById('slider-title').value,
            subtitle: document.getElementById('slider-subtitle').value,
            description: document.getElementById('slider-description').value,
            badgeText: document.getElementById('slider-badge-text').value,
            badgeColor: document.getElementById('slider-badge-color').value,
            price: parseFloat(document.getElementById('slider-price').value) || 0,
            originalPrice: parseFloat(document.getElementById('slider-original-price').value) || 0,
            isActive: document.getElementById('slider-status').checked,
            ...imageData
        };
        
        try {
            const url = sliderId 
                ? `${API_BASE_URL}/api/admin/sliders/${sliderId}` 
                : `${API_BASE_URL}/api/admin/sliders`;
            
            const method = sliderId ? 'PUT' : 'POST';
            
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(sliderData)
            });
            
            if (response.ok) {
                hideSliderModal();
                loadPageContent('sliders');
                showNotification('স্লাইডার সেভ হয়েছে!', 'success');
            } else {
                const error = await response.json();
                throw new Error(error.error || 'Failed to save');
            }
        } catch (error) {
            console.error('Error saving slider:', error);
            showNotification('স্লাইডার সেভ করতে সমস্যা: ' + error.message, 'error');
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    }
    
    async function editSlider(sliderId) {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/sliders`);
            if (!response.ok) throw new Error('Failed to load sliders');
            
            const sliders = await response.json();
            const slider = sliders.find(s => s._id === sliderId);
            
            if (slider) {
                document.getElementById('slider-modal-title').textContent = 'স্লাইডার সম্পাদনা';
                document.getElementById('slider-id').value = slider._id;
                document.getElementById('slider-number').value = slider.slideNumber;
                document.getElementById('slider-title').value = slider.title;
                document.getElementById('slider-subtitle').value = slider.subtitle;
                document.getElementById('slider-description').value = slider.description;
                document.getElementById('slider-badge-text').value = slider.badgeText || '';
                document.getElementById('slider-badge-color').value = slider.badgeColor || 'red';
                document.getElementById('slider-price').value = slider.price || '';
                document.getElementById('slider-original-price').value = slider.originalPrice || '';
                document.getElementById('slider-status').checked = slider.isActive;
                document.getElementById('slider-status-text').textContent = slider.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                
                document.getElementById('slider-image-url').value = slider.imageUrl;
                const urlPreview = document.getElementById('slider-url-preview');
                urlPreview.src = slider.imageUrl;
                urlPreview.classList.add('show');
                
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.querySelector('.tab-btn[data-tab="url-tab"]').classList.add('active');
                document.getElementById('url-tab').classList.add('active');
                
                document.getElementById('slider-modal').classList.add('active');
            }
        } catch (error) {
            console.error('Error editing slider:', error);
            showNotification('স্লাইডার লোড করতে সমস্যা!', 'error');
        }
    }
    
    async function updateSliderField(sliderId, field, value) {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ [field]: value })
            });
            
            if (response.ok) {
                showNotification('স্লাইডার আপডেট হয়েছে!', 'success');
            } else {
                throw new Error('Failed to update');
            }
        } catch (error) {
            console.error('Error updating slider:', error);
            showNotification('স্লাইডার আপডেট করতে সমস্যা!', 'error');
        }
    }
    
    async function toggleSlider(sliderId, isActive) {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ isActive })
            });
            
            if (response.ok) {
                showNotification(`স্লাইডার ${isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়'} করা হয়েছে`, 'success');
            }
        } catch (error) {
            console.error('Error toggling slider:', error);
            showNotification('স্লাইডার স্ট্যাটাস পরিবর্তন করতে সমস্যা!', 'error');
        }
    }
    
    // ============================================
    // অর্ডার ফাংশন
    // ============================================
    
    async function viewOrder(orderId) {
        selectedOrderId = orderId;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/orders`);
            if (!response.ok) throw new Error('Failed to load orders');
            
            const data = await response.json();
            const order = data.orders.find(o => o._id === orderId);
            
            if (order) {
                document.getElementById('order-details').innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                <i class="fas fa-user mr-2 text-blue-500"></i>গ্রাহক তথ্য
                            </h4>
                            <p><strong>নাম:</strong> ${order.customerName}</p>
                            <p><strong>ফোন:</strong> ${order.phone}</p>
                            <p><strong>ঠিকানা:</strong> ${order.address}</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                <i class="fas fa-shopping-cart mr-2 text-green-500"></i>অর্ডার তথ্য
                            </h4>
                            <p><strong>অর্ডার আইডি:</strong> ${order.orderId}</p>
                            <p><strong>পণ্য:</strong> ${order.productName}</p>
                            <p><strong>রং:</strong> ${order.color}</p>
                            <p><strong>সাইজ:</strong> ${order.size}</p>
                            <p><strong>পরিমাণ:</strong> ${order.quantity} পিস</p>
                            <p><strong>মোট দাম:</strong> ${order.totalPrice} টাকা</p>
                        </div>
                    </div>
                `;
                
                document.getElementById('order-status-select').value = order.status;
                document.getElementById('order-notes').value = order.notes || '';
                document.getElementById('order-modal').classList.add('active');
            }
        } catch (error) {
            console.error('Error loading order:', error);
            showNotification('অর্ডার লোড করতে সমস্যা!', 'error');
        }
    }
    
    async function updateOrderStatus() {
        const status = document.getElementById('order-status-select').value;
        const notes = document.getElementById('order-notes').value;
        
        const btn = document.getElementById('update-order-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="loading mr-2"></div> আপডেট হচ্ছে...';
        btn.disabled = true;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/orders/${selectedOrderId}/status`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ status, notes })
            });
            
            if (response.ok) {
                hideOrderModal();
                loadPageContent('orders');
                showNotification('অর্ডার স্ট্যাটাস আপডেট হয়েছে!', 'success');
            } else {
                throw new Error('Failed to update');
            }
        } catch (error) {
            console.error('Error updating order:', error);
            showNotification('স্ট্যাটাস আপডেট করতে সমস্যা!', 'error');
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    }
    
    function hideOrderModal() {
        document.getElementById('order-modal').classList.remove('active');
        selectedOrderId = null;
    }
    
    // ============================================
    // রিভিউ ফাংশন
    // ============================================
    
    async function approveReview(reviewId) {
        if (!confirm('আপনি কি এই রিভিউ এপ্রুভ করতে চান?')) return;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}/approve`, {
                method: 'PUT'
            });
            
            if (response.ok) {
                loadPageContent('reviews');
                showNotification('রিভিউ এপ্রুভ হয়েছে!', 'success');
            } else {
                throw new Error('Failed to approve');
            }
        } catch (error) {
            console.error('Error approving review:', error);
            showNotification('রিভিউ এপ্রুভ করতে সমস্যা!', 'error');
        }
    }
    
    async function deleteReview(reviewId) {
        if (!confirm('আপনি কি নিশ্চিত এই রিভিউ ডিলিট করতে চান?')) return;
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}`, {
                method: 'DELETE'
            });
            
            if (response.ok) {
                loadPageContent('reviews');
                showNotification('রিভিউ ডিলিট হয়েছে!', 'success');
            } else {
                throw new Error('Failed to delete');
            }
        } catch (error) {
            console.error('Error deleting review:', error);
            showNotification('রিভিউ ডিলিট করতে সমস্যা!', 'error');
        }
    }
    
    // ============================================
    // সেটিংস ফাংশন
    // ============================================
    
    async function handleSettingsSubmit(e) {
        e.preventDefault();
        
        const btn = e.target.querySelector('button[type="submit"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
        btn.disabled = true;
        
        const settingsData = {
            whatsappNumber: document.getElementById('whatsapp-number').value,
            phoneNumber: document.getElementById('phone-number').value,
            footerText: document.getElementById('footer-text').value,
            deliveryChargeInsideDhaka: parseFloat(document.getElementById('delivery-inside').value),
            deliveryChargeOutsideDhaka: parseFloat(document.getElementById('delivery-outside').value),
            homePageTitle: document.getElementById('home-page-title').value,
            orderFormTitle: document.getElementById('order-form-title').value,
            serviceHours: document.getElementById('service-hours').value
        };
        
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/settings`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(settingsData)
            });
            
            if (response.ok) {
                showNotification('সেটিংস সেভ হয়েছে!', 'success');
            } else {
                throw new Error('Failed to save');
            }
        } catch (error) {
            console.error('Error saving settings:', error);
            showNotification('সেটিংস সেভ করতে সমস্যা!', 'error');
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    }
    
    // ============================================
    // ফিল্টার ফাংশন
    // ============================================
    
    async function filterOrders() {
        const status = document.getElementById('order-filter').value;
        const url = status ? `${API_BASE_URL}/api/admin/orders?status=${status}` : `${API_BASE_URL}/api/admin/orders`;
        
        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error('Failed to load');
            
            const data = await response.json();
            const orders = data.orders || [];
            
            const tbody = document.querySelector('#orders-page tbody');
            tbody.innerHTML = orders.map(order => `
                <tr>
                    <td class="font-mono text-sm">${order.orderId}</td>
                    <td><div class="font-medium">${order.customerName}</div><div class="text-sm text-gray-500">${order.phone}</div></td>
                    <td>${order.productName}</td>
                    <td>${order.quantity} পিস</td>
                    <td>${order.totalPrice} টাকা</td>
                    <td><span class="order-status status-${order.status}">${getStatusText(order.status)}</span></td>
                    <td class="text-sm">${formatDate(order.createdAt)}</td>
                    <td><button onclick="viewOrder('${order._id}')" class="text-blue-600 hover:text-blue-800 p-1"><i class="fas fa-eye"></i></button></td>
                </tr>
            `).join('');
        } catch (error) {
            console.error('Error filtering orders:', error);
            showNotification('অর্ডার ফিল্টার করতে সমস্যা', 'error');
        }
    }
    
    async function filterReviews() {
        const filter = document.getElementById('review-filter').value;
        const url = filter ? `${API_BASE_URL}/api/admin/reviews?approved=${filter === 'approved'}` : `${API_BASE_URL}/api/admin/reviews`;
        
        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error('Failed to load');
            
            const reviews = await response.json();
            const container = document.querySelector('#reviews-page .p-6');
            
            if (reviews.length > 0) {
                container.innerHTML = reviews.map(review => `
                    <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:bg-gray-50">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="font-bold text-lg">${review.name}</h4>
                                <p class="text-gray-600 text-sm"><i class="fas fa-map-marker-alt mr-1"></i>${review.location} • <i class="far fa-clock mr-1"></i>${formatDate(review.createdAt)}</p>
                            </div>
                            <div class="text-yellow-500">${getStarRatingHTML(review.rating)}</div>
                        </div>
                        <p class="text-gray-700 mb-4 bg-gray-50 p-3 rounded">${review.text}</p>
                        <div class="flex justify-between items-center">
                            <span class="badge ${review.isApproved ? 'badge-success' : 'badge-warning'}">
                                <i class="fas ${review.isApproved ? 'fa-check-circle' : 'fa-clock'} mr-1"></i>
                                ${review.isApproved ? 'এপ্রুভড' : 'পেন্ডিং'}
                            </span>
                            <div>
                                ${!review.isApproved ? `<button onclick="approveReview('${review._id}')" class="btn btn-outline text-sm"><i class="fas fa-check mr-1"></i> এপ্রুভ</button>` : ''}
                                <button onclick="deleteReview('${review._id}')" class="btn btn-outline text-sm ml-2"><i class="fas fa-trash mr-1"></i> ডিলিট</button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = '<div class="text-center p-8 text-gray-500">কোনো রিভিউ পাওয়া যায়নি</div>';
            }
        } catch (error) {
            console.error('Error filtering reviews:', error);
            showNotification('রিভিউ ফিল্টার করতে সমস্যা', 'error');
        }
    }
    
    // ============================================
    // নোটিফিকেশন ফাংশন
    // ============================================
    
    function startNotificationPolling() {
        if (notificationInterval) clearInterval(notificationInterval);
        checkNotifications();
        notificationInterval = setInterval(checkNotifications, 30000);
    }
    
    async function checkNotifications() {
        try {
            const response = await fetch(`${API_BASE_URL}/api/admin/notifications`);
            if (response.ok) {
                const data = await response.json();
                notifications = data;
                updateNotificationUI();
            }
        } catch (error) {
            console.error('Error checking notifications:', error);
        }
    }
    
    function updateNotificationUI() {
        const total = (notifications.unreadOrders?.length || 0) + (notifications.unreadReviews?.length || 0);
        
        ['notification-count', 'mobile-notification-count'].forEach(id => {
            const badge = document.getElementById(id);
            if (badge) {
                if (total > 0) {
                    badge.textContent = total > 99 ? '99+' : total;
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }
            }
        });
        
        updateNotificationList('notification-list');
        updateNotificationList('mobile-notification-list');
    }
    
    function updateNotificationList(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        let html = '';
        
        if ((notifications.unreadOrders?.length || 0) + (notifications.unreadReviews?.length || 0) === 0) {
            html = '<div class="p-8 text-center text-gray-500"><i class="fas fa-bell-slash text-2xl mb-2"></i><p>কোনো নতুন নোটিফিকেশন নেই</p></div>';
        } else {
            // অর্ডার
            (notifications.unreadOrders || []).forEach(order => {
                html += `
                    <div class="notification-item unread p-3 border-b hover:bg-gray-50 cursor-pointer" data-type="order" data-id="${order._id}">
                        <div class="flex items-start">
                            <div class="text-green-600 mr-3 mt-1"><i class="fas fa-shopping-cart"></i></div>
                            <div class="flex-1">
                                <p class="font-medium">নতুন অর্ডার #${order.orderId}</p>
                                <p class="text-sm text-gray-600">${order.customerName} - ${order.productName}</p>
                                <p class="text-xs text-gray-500">${getTimeAgo(order.createdAt)}</p>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // রিভিউ
            (notifications.unreadReviews || []).forEach(review => {
                html += `
                    <div class="notification-item unread p-3 border-b hover:bg-gray-50 cursor-pointer" data-type="review" data-id="${review._id}">
                        <div class="flex items-start">
                            <div class="text-yellow-600 mr-3 mt-1"><i class="fas fa-star"></i></div>
                            <div class="flex-1">
                                <p class="font-medium">নতুন রিভিউ</p>
                                <p class="text-sm text-gray-600">${review.name} - ${review.rating} ★</p>
                                <p class="text-xs text-gray-500">${getTimeAgo(review.createdAt)}</p>
                            </div>
                        </div>
                    </div>
                `;
            });
        }
        
        container.innerHTML = html;
        
        container.querySelectorAll('.notification-item').forEach(item => {
            item.addEventListener('click', function() {
                const type = this.dataset.type;
                const id = this.dataset.id;
                
                markAsRead(type, id);
                
                if (type === 'order') {
                    viewOrder(id);
                } else if (type === 'review') {
                    switchPage('reviews');
                }
                
                document.querySelectorAll('.notification-dropdown.show').forEach(d => d.classList.remove('show'));
            });
        });
    }
    
    async function markAsRead(type, id) {
        try {
            await fetch(`${API_BASE_URL}/api/admin/notifications/read`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type, id })
            });
            
            if (type === 'order') {
                notifications.unreadOrders = (notifications.unreadOrders || []).filter(o => o._id !== id);
            } else if (type === 'review') {
                notifications.unreadReviews = (notifications.unreadReviews || []).filter(r => r._id !== id);
            }
            
            updateNotificationUI();
        } catch (error) {
            console.error('Error marking as read:', error);
        }
    }
    
    async function markAllAsRead() {
        try {
            await fetch(`${API_BASE_URL}/api/admin/notifications/read`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type: 'all' })
            });
            
            notifications = { unreadOrders: [], unreadReviews: [] };
            updateNotificationUI();
            showNotification('সব নোটিফিকেশন পড়া হয়েছে', 'success');
            
            document.querySelectorAll('.notification-dropdown.show').forEach(d => d.classList.remove('show'));
        } catch (error) {
            console.error('Error marking all as read:', error);
        }
    }
    
    // ============================================
    // ইউটিলিটি ফাংশন
    // ============================================
    
    function toggleMobileMenu() {
        sidebar.classList.toggle('mobile-open');
        document.getElementById('sidebar-overlay').classList.toggle('active');
        document.body.style.overflow = sidebar.classList.contains('mobile-open') && window.innerWidth < 768 ? 'hidden' : '';
    }
    
    function updateDateTime() {
        const now = new Date();
        const dateOpt = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const timeOpt = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
        
        const dateEl = document.getElementById('current-date');
        if (dateEl) dateEl.textContent = now.toLocaleDateString('bn-BD', dateOpt);
        
        const timeEl = document.getElementById('current-time-large');
        if (timeEl) timeEl.textContent = now.toLocaleTimeString('bn-BD', timeOpt);
        
        const sidebarTime = document.getElementById('current-time');
        if (sidebarTime) sidebarTime.textContent = now.toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' });
    }
    
    function loadDashboard() {
        loadPageContent('dashboard');
    }
    
    function getStatusText(status) {
        const map = {
            pending: 'পেন্ডিং', confirmed: 'কনফার্মড', processing: 'প্রসেসিং',
            shipped: 'শিপড', delivered: 'ডেলিভার্ড', cancelled: 'ক্যান্সেলড'
        };
        return map[status] || status;
    }
    
    function getStarRatingHTML(rating) {
        let stars = '';
        for (let i = 1; i <= 5; i++) {
            stars += i <= rating 
                ? '<i class="fas fa-star"></i>' 
                : '<i class="far fa-star"></i>';
        }
        return stars;
    }
    
    function formatDate(dateString) {
        try {
            return new Date(dateString).toLocaleDateString('bn-BD', {
                year: 'numeric', month: 'short', day: 'numeric',
                hour: '2-digit', minute: '2-digit'
            });
        } catch {
            return dateString;
        }
    }
    
    function getTimeAgo(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diff = now - date;
        const mins = Math.floor(diff / 60000);
        
        if (mins < 1) return 'এখনই';
        if (mins < 60) return `${mins} মিনিট আগে`;
        if (mins < 1440) return `${Math.floor(mins / 60)} ঘণ্টা আগে`;
        return `${Math.floor(mins / 1440)} দিন আগে`;
    }
    
    function showNotification(message, type = 'info') {
        const container = document.getElementById('notification-container');
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `<div class="flex items-center"><i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} mr-3"></i><span>${message}</span></div>`;
        container.appendChild(notification);
        setTimeout(() => notification.remove(), 3000);
    }
    
    function hideAllModals() {
        document.querySelectorAll('.modal.active').forEach(m => m.classList.remove('active'));
    }
    
    // এক্সপোর্ট ফাংশন
    window.switchPage = switchPage;
    window.loadPageContent = loadPageContent;
    window.loadDashboard = loadDashboard;
    window.showAddProductModal = showAddProductModal;
    window.editProduct = editProduct;
    window.deleteProduct = deleteProduct;
    window.showAddSliderModal = showAddSliderModal;
    window.editSlider = editSlider;
    window.updateSliderField = updateSliderField;
    window.toggleSlider = toggleSlider;
    window.viewOrder = viewOrder;
    window.approveReview = approveReview;
    window.deleteReview = deleteReview;
    window.filterOrders = filterOrders;
     window.filterReviews = filterReviews;
</script>
</body>
</html>