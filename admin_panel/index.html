<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL TRUST BD - Admin Panel</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hind Siliguri', sans-serif;
            overflow-x: hidden;
        }
        
        /* Responsive Layout */
        @media (min-width: 768px) {
            .mobile-only {
                display: none;
            }
        }
        
        @media (max-width: 767px) {
            .desktop-only {
                display: none;
            }
        }
        
        /* Admin Container */
        .admin-container {
            display: flex;
            min-height: 100vh;
            background: #f7fafc;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1a202c 0%, #2d3748 100%);
            color: white;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            z-index: 40;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar.collapsed {
            transform: translateX(-280px);
        }
        
        @media (max-width: 767px) {
            .sidebar {
                transform: translateX(-280px);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 39;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
        }
        
        /* Sidebar Content */
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 80px;
        }
        
        /* Sidebar Footer */
        .sidebar-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 280px;
            background: #2d3748;
            border-top: 1px solid #4a5568;
            padding: 16px;
            z-index: 41;
        }
        
        @media (max-width: 767px) {
            .sidebar-footer {
                width: 280px;
            }
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
        }
        
        @media (max-width: 767px) {
            .main-content {
                margin-left: 0;
            }
        }
        
        /* Scrollbar Styles */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: #2d3748;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 3px;
        }
        
        /* Components */
        .stat-card {
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #cbd5e0;
        }
        
        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-block;
        }
        
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-confirmed { background: #dbeafe; color: #1e40af; }
        .status-processing { background: #f3e8ff; color: #7c3aed; }
        .status-shipped { background: #f0f9ff; color: #0c4a6e; }
        .status-delivered { background: #d1fae5; color: #065f46; }
        .status-cancelled { background: #fee2e2; color: #991b1b; }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-bottom: 6px;
            cursor: pointer;
            border: 1px solid transparent;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.2);
        }
        
        .nav-item.active {
            background: rgba(220, 38, 38, 0.2);
            color: #fff;
            border-color: rgba(220, 38, 38, 0.3);
        }
        
        .nav-item i {
            width: 24px;
            text-align: center;
            margin-right: 12px;
            font-size: 18px;
        }
        
        /* Logout Button Styles */
        .logout-btn {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            padding: 12px 20px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            font-size: 16px;
        }
        
        .logout-btn:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }
        
        .logout-btn i {
            width: 24px;
            text-align: center;
            margin-right: 12px;
            font-size: 18px;
        }
        
        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background: #f8fafc;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
            white-space: nowrap;
        }
        
        .data-table td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: middle;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table tr:hover {
            background: #f7fafc;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4a5568;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            min-height: 100px;
            resize: vertical;
        }
        
        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            outline: none;
            font-size: 16px;
        }
        
        .btn-primary {
            background: #dc2626;
            color: white;
        }
        
        .btn-primary:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }
        
        .btn-secondary {
            background: #4a5568;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #2d3748;
        }
        
        .btn-outline {
            background: transparent;
            color: #4a5568;
            border: 1px solid #e2e8f0;
        }
        
        .btn-outline:hover {
            background: #f7fafc;
            border-color: #cbd5e0;
        }
        
        /* Image Upload Styles */
        .image-upload-container {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8fafc;
            position: relative;
            overflow: hidden;
        }
        
        .image-upload-container:hover {
            border-color: #4299e1;
            background: #edf2f7;
        }
        
        .image-upload-container.has-image {
            border-color: #48bb78;
            background: #f0fff4;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 6px;
            margin-top: 15px;
            display: none;
        }
        
        .image-preview.show {
            display: block;
        }
        
        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #dc2626;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            z-index: 1001;
            animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .notification.success {
            background: #48bb78;
        }
        
        .notification.error {
            background: #f56565;
        }
        
        .notification.warning {
            background: #ed8936;
        }
        
        .notification.info {
            background: #4299e1;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }
        
        /* Responsive Table */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        @media (max-width: 768px) {
            .data-table {
                font-size: 14px;
            }
            
            .data-table th,
            .data-table td {
                padding: 12px 8px;
            }
            
            .modal-content {
                width: 95%;
                max-height: 95vh;
            }
        }
        
        /* Mobile Header */
        .mobile-header {
            display: none;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 12px 16px;
            height: 70px;
            box-sizing: border-box;
        }
        
        @media (max-width: 767px) {
            .mobile-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .main-content {
                padding-top: 70px;
            }
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Notification Dropdown - FIXED for mobile */
        .notification-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 400px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            max-height: 500px;
            overflow-y: auto;
        }
        
        @media (max-width: 640px) {
            .notification-dropdown {
                position: fixed !important;
                top: 70px !important;
                left: 10px !important;
                right: 10px !important;
                width: calc(100% - 20px) !important;
                max-height: 60vh;
                border-radius: 12px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            }
        }
        
        .notification-dropdown.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notification-item {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .notification-item:hover {
            background: #f9fafb;
        }
        
        .notification-item.unread {
            background: #f0f9ff;
        }
        
        .notification-item .time {
            font-size: 12px;
            color: #6b7280;
        }
        
        /* Tab Styles for Image Upload */
        .tab-container {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #4a5568;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .tab-btn:hover {
            color: #dc2626;
        }
        
        .tab-btn.active {
            color: #dc2626;
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #dc2626;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        /* Color Image Preview */
        .color-image-preview {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
            border: 2px solid #e2e8f0;
        }
        
        /* Color Image Upload Container */
        .color-image-upload {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8fafc;
            margin-top: 10px;
        }
        
        .color-image-upload:hover {
            border-color: #4299e1;
            background: #edf2f7;
        }
        
        .color-image-upload.has-image {
            border-color: #48bb78;
            background: #f0fff4;
        }
        
        /* File Input Custom */
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            height: 100%;
            width: 100%;
        }
        
        /* Badge Styles */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }
        
        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge-danger {
            background: #fee2e2;
            color: #991b1b;
        }
        
        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #dc2626;
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        /* Alert Styles */
        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        
        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        
        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Login Page -->
     <div id="login-page" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-blue-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4">
            <div class="text-center mb-8">
                <!-- Logo image replaces the crown icon -->
                <div class="w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4 overflow-hidden">
                    <img src="/images/jahirul-01.png" alt="ROYAL TRUST BID" class="w-full h-full object-contain">
                </div>
                <h1 class="text-3xl font-bold text-red-700 mb-2">ROYAL TRUST BID</h1>
                <p class="text-gray-600">এডমিন প্যানেল লগইন</p>
            </div>
            
            <form id="login-form" class="space-y-6">
                <div>
                    <label class="block text-gray-700 mb-2">
                        <i class="fas fa-user mr-2 text-red-600"></i>
                        ব্যবহারকারীর নাম
                    </label>
                    <input type="text" id="username" required 
                           class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                           placeholder="ব্যবহারকারীর নাম লিখুন"
                           value="admin">
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">
                        <i class="fas fa-lock mr-2 text-red-600"></i>
                        পাসওয়ার্ড
                    </label>
                    <input type="password" id="password" required 
                           class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                           placeholder="পাসওয়ার্ড লিখুন"
                           value="admin123">
                </div>
                
                <div id="login-error" class="text-red-600 text-center hidden bg-red-50 p-4 rounded-lg">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span id="login-error-text">ভুল ব্যবহারকারীর নাম বা পাসওয়ার্ড!</span>
                </div>
                
                <button type="submit" id="login-btn" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 rounded-lg transition duration-300 flex items-center justify-center">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    <span>লগইন করুন</span>
                </button>
            </form>

             <div class="mt-8 pt-6 border-t border-gray-200">
                <div class="text-center text-gray-600 text-sm">
                    <p class="mb-2">
                        <i class="fas fa-server mr-2 text-blue-600"></i>
                        ব্যাকএন্ড API:
                    </p>
                    <p id="api-url" class="font-mono text-blue-600 bg-blue-50 p-2 rounded text-xs truncate">https://royal-trustbd.onrender.com</p>
                    <p class="mt-4 text-gray-500">
                        <i class="fas fa-info-circle mr-1"></i>
                        ডিফল্ট লগইন: admin / admin123
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="admin-panel" class="admin-container hidden">
        <!-- Mobile Header -->
        <div class="mobile-header">
             <button id="mobile-menu-btn" class="text-gray-700 p-2">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <h1 class="text-xl font-bold text-red-700">ROYAL TRUST BID</h1>
            <div class="relative">
                <button id="mobile-notification-btn" class="text-gray-700 p-2 relative">
                    <i class="fas fa-bell text-xl"></i>
                    <span id="mobile-notification-count" class="notification-badge hidden">0</span>
                </button>
                <!-- Mobile Notification Dropdown -->
                <div class="notification-dropdown" id="mobile-notification-dropdown">
                    <div class="p-4 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-gray-800">নোটিফিকেশন</h3>
                            <button id="mobile-mark-all-read" class="text-sm text-blue-600 hover:text-blue-800">
                                সব পড়া হয়েছে
                            </button>
                        </div>
                    </div>
                    <div id="mobile-notification-list">
                        <!-- Notifications will be loaded here -->
                    </div>
                    <div class="p-4 text-center border-t border-gray-200">
                        <a href="#" onclick="switchPage('orders')" class="text-sm text-blue-600 hover:text-blue-800">
                            সব অর্ডার দেখুন
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar Overlay (Mobile) -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-white text-xl font-bold">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold">ROYAL TRUST BD</h2>
                        <p class="text-gray-400 text-sm">এডমিন প্যানেল</p>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-content">
                <nav class="p-4">
                    <div class="mb-6">
                        <h3 class="text-gray-400 text-xs uppercase tracking-wider mb-3 px-4">মূল মেনু</h3>
                        <div class="space-y-1">
                            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                                <i class="fas fa-tachometer-alt"></i>
                                ড্যাশবোর্ড
                            </a>
                            <a href="#products" class="nav-item" data-page="products">
                                <i class="fas fa-tshirt"></i>
                                পণ্য ব্যবস্থাপনা
                            </a>
                            <a href="#orders" class="nav-item" data-page="orders">
                                <i class="fas fa-shopping-cart"></i>
                                অর্ডার ব্যবস্থাপনা
                            </a>
                            <a href="#reviews" class="nav-item" data-page="reviews">
                                <i class="fas fa-star"></i>
                                রিভিউ ব্যবস্থাপনা
                            </a>
                            <a href="#sliders" class="nav-item" data-page="sliders">
                                <i class="fas fa-images"></i>
                                স্লাইডার ব্যবস্থাপনা
                            </a>
                            <a href="#settings" class="nav-item" data-page="settings">
                                <i class="fas fa-cog"></i>
                                ওয়েবসাইট সেটিংস
                            </a>
                        </div>
                    </div>
                </nav>
            </div>
            
            <!-- Sidebar Footer with Logout Button -->
            <div class="sidebar-footer">
                <div class="text-center">
                    <p class="text-gray-400 text-sm mb-1">লগইন করেছেন:</p>
                    <p id="logged-in-user" class="font-bold text-white">-</p>
                    <p class="text-gray-400 text-xs mt-2" id="current-time">-</p>
                </div>
                <button id="logout-btn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    লগআউট
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content" id="main-content">
            <!-- Desktop Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 desktop-only">
                <div class="px-6 py-4">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-800" id="page-title">ড্যাশবোর্ড</h1>
                            <p class="text-gray-600 text-sm mt-1" id="page-subtitle">সর্বশেষ আপডেট এবং পরিসংখ্যান</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <!-- Notification Bell -->
                            <div class="relative">
                                <button id="notification-btn" class="text-gray-700 p-2 relative">
                                    <i class="fas fa-bell text-xl"></i>
                                    <span id="notification-count" class="notification-badge hidden">0</span>
                                </button>
                                <!-- Notification Dropdown -->
                                <div class="notification-dropdown" id="notification-dropdown">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex justify-between items-center">
                                            <h3 class="font-bold text-gray-800">নোটিফিকেশন</h3>
                                            <button id="mark-all-read" class="text-sm text-blue-600 hover:text-blue-800">
                                                সব পড়া হয়েছে
                                            </button>
                                        </div>
                                    </div>
                                    <div id="notification-list">
                                        <!-- Notifications will be loaded here -->
                                    </div>
                                    <div class="p-4 text-center border-t border-gray-200">
                                        <a href="#" onclick="switchPage('orders')" class="text-sm text-blue-600 hover:text-blue-800">
                                            সব অর্ডার দেখুন
                                        </a>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-right">
                                <p class="text-gray-600 text-sm" id="current-date"></p>
                                <p class="text-gray-800 font-medium" id="current-time-large"></p>
                            </div>
                            <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-bold">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Content Area -->
            <main class="p-4 md:p-6" id="content-area">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page-content">
                    <!-- Statistics Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                        <!-- Cards will be loaded here -->
                    </div>
                    
                    <!-- Recent Orders -->
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6 md:mb-8">
                        <div class="p-4 md:p-6 border-b border-gray-200">
                            <div class="flex justify-between items-center">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-clock mr-3 text-yellow-500"></i>
                                    সাম্প্রতিক অর্ডারসমূহ
                                </h2>
                                <a href="#orders" onclick="switchPage('orders')" class="text-red-600 hover:text-red-800 text-sm font-medium flex items-center">
                                    <span>সব অর্ডার দেখুন</span>
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </a>
                            </div>
                        </div>
                        <div class="p-4 md:p-6">
                            <div class="table-responsive">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>অর্ডার আইডি</th>
                                            <th>গ্রাহকের নাম</th>
                                            <th>পণ্য</th>
                                            <th>মোট</th>
                                            <th>স্ট্যাটাস</th>
                                            <th>তারিখ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recent-orders-table">
                                        <!-- Orders will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Other pages will be loaded dynamically -->
            </main>
        </div>
    </div>
    
    <!-- Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold" id="product-modal-title">নতুন পণ্য যোগ করুন</h3>
            </div>
            <form id="product-form" class="p-6 space-y-6">
                <input type="hidden" id="product-id">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label class="form-label">পণ্যের নাম *</label>
                        <input type="text" id="product-name" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">বর্ণনা *</label>
                        <textarea id="product-description" required rows="3" class="form-textarea"></textarea>
                    </div>
                </div>
                
                <!-- Color Management -->
                <div class="form-group">
                    <label class="form-label mb-4">রংসমূহ</label>
                    <div id="colors-container" class="space-y-6">
                        <!-- Color fields will be added here -->
                    </div>
                    <button type="button" id="add-color-btn" class="mt-4 btn btn-outline w-full flex items-center justify-center">
                        <i class="fas fa-plus-circle mr-2"></i>
                        নতুন রং যোগ করুন
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="form-group">
                        <label class="form-label">সাইজ *</label>
                        <input type="text" id="product-size" required class="form-input" placeholder="S, M, L, XL, XXL">
                    </div>
                    <div class="form-group">
                        <label class="form-label">নিয়মিত দাম *</label>
                        <input type="number" id="regular-price" required class="form-input" min="0" step="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">অফার দাম *</label>
                        <input type="number" id="offer-price" required class="form-input" min="0" step="1">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label class="form-label">ছাড়ের শতাংশ</label>
                        <input type="number" id="offer-percentage" class="form-input bg-gray-50" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">স্ট্যাটাস</label>
                        <div class="flex items-center space-x-4">
                            <label class="switch">
                                <input type="checkbox" id="product-status" checked>
                                <span class="slider"></span>
                            </label>
                            <span id="product-status-text">সক্রিয়</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <button type="button" id="cancel-product-btn" class="btn btn-outline">
                        বাতিল করুন
                    </button>
                    <button type="submit" id="save-product-btn" class="btn btn-primary">
                        <i class="fas fa-save mr-2"></i>
                        সেভ করুন
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Slider Modal -->
    <div id="slider-modal" class="modal">
        <div class="modal-content max-w-3xl">
            <div class="flex items-center space-x-3">
                    <!-- Logo image in sidebar -->
                    <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center overflow-hidden">
                        <img src="/images/Jahirul-01.png" alt="ROYAL TRUST BID" class="w-full h-full object-contain">
                    </div>
                    <div>
                        <h2 class="text-xl font-bold">ROYAL TRUST BID</h2>
                        <p class="text-gray-400 text-sm">এডমিন প্যানেল</p>
                    </div>
                </div>
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold" id="slider-modal-title">নতুন স্লাইডার যোগ করুন</h3>
            </div>
            <form id="slider-form" class="p-6 space-y-6">
                <input type="hidden" id="slider-id">
                
                <div class="form-group">
                    <label class="form-label">স্লাইডার নম্বর *</label>
                    <input type="number" id="slider-number" required class="form-input" min="1">
                </div>
                
                <!-- Image Upload Tabs -->
                <div class="form-group">
                    <label class="form-label mb-3">স্লাইডার ইমেজ *</label>
                    <div class="tab-container">
                        <button type="button" class="tab-btn active" data-tab="url-tab">URL লিংক</button>
                        <button type="button" class="tab-btn" data-tab="upload-tab">ফাইল আপলোড</button>
                    </div>
                    
                    <!-- URL Tab -->
                    <div id="url-tab" class="tab-content active">
                        <div class="form-group">
                            <input type="text" id="slider-image-url" class="form-input" placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="mt-4">
                            <img id="slider-url-preview" class="image-preview w-full max-h-64 object-cover rounded-lg">
                        </div>
                    </div>
                    
                    <!-- Upload Tab -->
                    <div id="upload-tab" class="tab-content">
                        <div class="image-upload-container" id="slider-image-upload">
                            <div class="text-center">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                                <p class="font-medium">ছবি আপলোড করুন</p>
                                <p class="text-gray-500 text-sm mt-1">ফাইল নির্বাচন করতে ক্লিক করুন (PNG, JPG, JPEG, WEBP)</p>
                                <input type="file" id="slider-image-file" accept="image/*" class="hidden">
                                <input type="hidden" id="slider-image-base64">
                            </div>
                            <img id="slider-upload-preview" class="image-preview">
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label class="form-label">শিরোনাম *</label>
                        <input type="text" id="slider-title" required class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">সাবটাইটেল *</label>
                        <input type="text" id="slider-subtitle" required class="form-input">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">বর্ণনা *</label>
                    <textarea id="slider-description" required rows="3" class="form-textarea"></textarea>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="form-group">
                        <label class="form-label">ব্যাজ টেক্সট</label>
                        <input type="text" id="slider-badge-text" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ব্যাজ কালার</label>
                        <select id="slider-badge-color" class="form-input">
                            <option value="red">লাল</option>
                            <option value="blue">নীল</option>
                            <option value="green">সবুজ</option>
                            <option value="yellow">হলুদ</option>
                            <option value="purple">বেগুনী</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">স্ট্যাটাস</label>
                        <div class="flex items-center space-x-4">
                            <label class="switch">
                                <input type="checkbox" id="slider-status" checked>
                                <span class="slider"></span>
                            </label>
                            <span id="slider-status-text">সক্রিয়</span>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label class="form-label">দাম</label>
                        <input type="number" id="slider-price" class="form-input" min="0" step="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">আসল দাম</label>
                        <input type="number" id="slider-original-price" class="form-input" min="0" step="1">
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <button type="button" id="cancel-slider-btn" class="btn btn-outline">
                        বাতিল করুন
                    </button>
                    <button type="submit" id="save-slider-btn" class="btn btn-primary">
                        <i class="fas fa-save mr-2"></i>
                        সেভ করুন
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <div id="order-modal" class="modal">
        <div class="modal-content max-w-2xl">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold">অর্ডার বিবরণ</h3>
            </div>
            <div class="p-6 space-y-6">
                <div id="order-details">
                    <!-- Order details will be loaded here -->
                </div>
                
                <div class="form-group">
                    <label class="form-label">স্ট্যাটাস পরিবর্তন করুন</label>
                    <select id="order-status-select" class="form-input">
                        <option value="pending">পেন্ডিং</option>
                        <option value="confirmed">কনফার্মড</option>
                        <option value="processing">প্রসেসিং</option>
                        <option value="shipped">শিপড</option>
                        <option value="delivered">ডেলিভার্ড</option>
                        <option value="cancelled">ক্যান্সেলড</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">নোটস</label>
                    <textarea id="order-notes" rows="3" class="form-textarea"></textarea>
                </div>
                
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <button type="button" id="cancel-order-btn" class="btn btn-outline">
                        বন্ধ করুন
                    </button>
                    <button type="button" id="update-order-btn" class="btn btn-primary">
                        <i class="fas fa-sync mr-2"></i>
                        স্ট্যাটাস আপডেট
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notification-container"></div>

    <script>
        // Configuration
        const API_BASE_URL = 'https://ownerofroyal-trustbd.onrender.com';
        let currentUser = null;
        let selectedOrderId = null;
        let currentPage = 'dashboard';
        let notificationInterval = null;
        let notifications = {
            unreadOrders: [],
            unreadReviews: []
        };
        
        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const adminPanel = document.getElementById('admin-panel');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileNotificationBtn = document.getElementById('mobile-notification-btn');
        const contentArea = document.getElementById('content-area');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const savedUser = localStorage.getItem('admin_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showAdminPanel();
                loadDashboard();
                startNotificationPolling();
                requestNotificationPermission();
            }
            
            // Setup event listeners
            setupEventListeners();
            
            // Update time
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // Close dropdowns on window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth >= 768) {
                    // ডেস্কটপ মোডে এলে নোটিফিকেশন ড্রপডাউন বন্ধ করুন
                    hideAllNotifications();
                    // মোবাইল মেনু বন্ধ করুন
                    sidebar.classList.remove('mobile-open');
                    sidebarOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });
        
        // Setup event listeners
        function setupEventListeners() {
            // Login form
            loginForm.addEventListener('submit', handleLogin);
            
            // Mobile menu
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            sidebarOverlay.addEventListener('click', toggleMobileMenu);
            
            // Navigation
            document.querySelectorAll('.nav-item[data-page]').forEach(item => {
                item.addEventListener('click', handleNavigation);
            });
            
            // Logout
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            
            // Product modal
            document.getElementById('add-color-btn').addEventListener('click', addColorField);
            document.getElementById('cancel-product-btn').addEventListener('click', hideProductModal);
            document.getElementById('product-form').addEventListener('submit', handleProductSubmit);
            
            // Price calculation
            document.getElementById('regular-price').addEventListener('input', calculateDiscount);
            document.getElementById('offer-price').addEventListener('input', calculateDiscount);
            
            // Product status toggle
            const productStatus = document.getElementById('product-status');
            if (productStatus) {
                productStatus.addEventListener('change', function() {
                    document.getElementById('product-status-text').textContent = this.checked ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                });
            }
            
            // Slider modal
            document.getElementById('cancel-slider-btn').addEventListener('click', hideSliderModal);
            document.getElementById('slider-form').addEventListener('submit', handleSliderSubmit);
            
            // Slider image tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    // Hide all tabs
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.querySelectorAll('.tab-btn').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    // Show selected tab
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Slider URL preview
            const sliderUrlInput = document.getElementById('slider-image-url');
            if (sliderUrlInput) {
                sliderUrlInput.addEventListener('input', function() {
                    const preview = document.getElementById('slider-url-preview');
                    if (this.value) {
                        preview.src = this.value;
                        preview.classList.add('show');
                    } else {
                        preview.classList.remove('show');
                    }
                });
            }
            
            // Slider file upload
            const sliderImageUpload = document.getElementById('slider-image-upload');
            if (sliderImageUpload) {
                sliderImageUpload.addEventListener('click', () => {
                    document.getElementById('slider-image-file').click();
                });
                
                document.getElementById('slider-image-file').addEventListener('change', handleSliderImageUpload);
            }
            
            // Slider status toggle
            const sliderStatus = document.getElementById('slider-status');
            if (sliderStatus) {
                sliderStatus.addEventListener('change', function() {
                    document.getElementById('slider-status-text').textContent = this.checked ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                });
            }
            
            // Order modal
            document.getElementById('cancel-order-btn').addEventListener('click', hideOrderModal);
            document.getElementById('update-order-btn').addEventListener('click', updateOrderStatus);
            
            // FIXED: Notification events for both desktop and mobile
            const notificationBtn = document.getElementById('notification-btn');
            const mobileNotificationBtn = document.getElementById('mobile-notification-btn');
            
            if (notificationBtn) {
                notificationBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleDesktopNotifications();
                });
            }
            
            if (mobileNotificationBtn) {
                mobileNotificationBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    toggleMobileNotifications();
                });
            }
            
            // Mark all read buttons
            document.getElementById('mark-all-read')?.addEventListener('click', markAllAsRead);
            document.getElementById('mobile-mark-all-read')?.addEventListener('click', markAllAsRead);
            
            // FIXED: Close notification dropdown when clicking outside - improved
            document.addEventListener('click', function(e) {
                const desktopDropdown = document.getElementById('notification-dropdown');
                const mobileDropdown = document.getElementById('mobile-notification-dropdown');
                const notificationBtn = document.getElementById('notification-btn');
                const mobileNotificationBtn = document.getElementById('mobile-notification-btn');
                
                // চেক করুন যে ক্লিক কোথায় হয়েছে
                const isNotificationBtn = notificationBtn?.contains(e.target);
                const isMobileNotificationBtn = mobileNotificationBtn?.contains(e.target);
                const isDesktopDropdown = desktopDropdown?.contains(e.target);
                const isMobileDropdown = mobileDropdown?.contains(e.target);
                
                if (desktopDropdown && desktopDropdown.classList.contains('show') && 
                    !isNotificationBtn && !isDesktopDropdown) {
                    hideDesktopNotifications();
                }
                
                if (mobileDropdown && mobileDropdown.classList.contains('show') && 
                    !isMobileNotificationBtn && !isMobileDropdown) {
                    hideMobileNotifications();
                }
            });
            
            // Escape key to close modals
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    hideAllModals();
                    hideAllNotifications();
                }
            });
        }
        
        // Toggle mobile menu
        function toggleMobileMenu() {
            sidebar.classList.toggle('mobile-open');
            sidebarOverlay.classList.toggle('active');
            
            // Close notification dropdown when opening mobile menu
            hideAllNotifications();
            
            // Prevent body scroll when mobile menu is open
            if (window.innerWidth < 768) {
                if (sidebar.classList.contains('mobile-open')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            }
        }
        
        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric'
            };
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            
            // Update date
            const currentDate = document.getElementById('current-date');
            const currentTimeLarge = document.getElementById('current-time-large');
            
            if (currentDate) {
                currentDate.textContent = now.toLocaleDateString('bn-BD', dateOptions);
            }
            if (currentTimeLarge) {
                currentTimeLarge.textContent = now.toLocaleTimeString('bn-BD', timeOptions);
            }
            
            // Update sidebar time
            const currentTime = document.getElementById('current-time');
            if (currentTime) {
                currentTime.textContent = now.toLocaleTimeString('bn-BD', {hour: '2-digit', minute: '2-digit'});
            }
        }
        
        // Handle login
        async function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('login-btn');
            
            // Loading state
            const originalText = loginBtn.innerHTML;
            loginBtn.innerHTML = '<div class="loading mr-2"></div> লগইন হচ্ছে...';
            loginBtn.disabled = true;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    currentUser = { username: data.username };
                    localStorage.setItem('admin_user', JSON.stringify(currentUser));
                    showAdminPanel();
                    loadDashboard();
                    loginError.classList.add('hidden');
                    showNotification('লগইন সফল!', 'success');
                    startNotificationPolling();
                    requestNotificationPermission();
                } else {
                    const error = await response.json();
                    throw new Error(error.error || 'Login failed');
                }
            } catch (error) {
                loginError.classList.remove('hidden');
                document.getElementById('login-error-text').textContent = error.message;
                console.error('Login error:', error);
            } finally {
                loginBtn.innerHTML = originalText;
                loginBtn.disabled = false;
            }
        }
        
        // Handle logout
        function handleLogout() {
            if (confirm('আপনি কি নিশ্চিত যে লগআউট করতে চান?')) {
                localStorage.removeItem('admin_user');
                currentUser = null;
                adminPanel.classList.add('hidden');
                loginPage.classList.remove('hidden');
                loginForm.reset();
                
                // Stop notification polling
                if (notificationInterval) {
                    clearInterval(notificationInterval);
                    notificationInterval = null;
                }
                
                showNotification('সফলভাবে লগআউট করা হয়েছে', 'info');
            }
        }
        
        // Show admin panel
        function showAdminPanel() {
            loginPage.classList.add('hidden');
            adminPanel.classList.remove('hidden');
            
            // Update user info
            const loggedInUser = document.getElementById('logged-in-user');
            if (loggedInUser) {
                loggedInUser.textContent = currentUser.username;
            }
        }
        
        // Handle navigation
        function handleNavigation(e) {
            e.preventDefault();
            const page = this.getAttribute('data-page');
            switchPage(page);
            
            // Close mobile menu on mobile
            if (window.innerWidth < 768) {
                toggleMobileMenu();
            }
            
            // Close notification dropdown
            hideAllNotifications();
        }
        
        // Switch page
        function switchPage(page) {
            currentPage = page;
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === page) {
                    item.classList.add('active');
                }
            });
            
            // Update page title
            const pageTitles = {
                'dashboard': 'ড্যাশবোর্ড',
                'products': 'পণ্য ব্যবস্থাপনা',
                'orders': 'অর্ডার ব্যবস্থাপনা',
                'reviews': 'রিভিউ ব্যবস্থাপনা',
                'sliders': 'স্লাইডার ব্যবস্থাপনা',
                'settings': 'ওয়েবসাইট সেটিংস'
            };
            
            const pageSubtitles = {
                'dashboard': 'সর্বশেষ আপডেট এবং পরিসংখ্যান',
                'products': 'আপনার পণ্য তালিকা পরিচালনা করুন',
                'orders': 'গ্রাহকদের অর্ডার তালিকা এবং স্ট্যাটাস',
                'reviews': 'গ্রাহকদের রিভিউ এবং রেটিং',
                'sliders': 'হোমপেজ স্লাইডার ইমেজ এবং কন্টেন্ট',
                'settings': 'ওয়েবসাইটের সাধারণ সেটিংস কনফিগারেশন'
            };
            
            const pageTitle = document.getElementById('page-title');
            const pageSubtitle = document.getElementById('page-subtitle');
            
            if (pageTitle) pageTitle.textContent = pageTitles[page];
            if (pageSubtitle) pageSubtitle.textContent = pageSubtitles[page];
            
            // Load page content
            loadPageContent(page);
        }
        
        // Load page content
        async function loadPageContent(page) {
            contentArea.innerHTML = '<div class="text-center p-8"><div class="loading mx-auto"></div><p class="mt-2">লোড হচ্ছে...</p></div>';
            
            try {
                let html = '';
                
                switch(page) {
                    case 'dashboard':
                        html = await loadDashboardContent();
                        break;
                    case 'products':
                        html = await loadProductsContent();
                        break;
                    case 'orders':
                        html = await loadOrdersContent();
                        break;
                    case 'reviews':
                        html = await loadReviewsContent();
                        break;
                    case 'sliders':
                        html = await loadSlidersContent();
                        break;
                    case 'settings':
                        html = await loadSettingsContent();
                        break;
                }
                
                contentArea.innerHTML = html;
                
                // Setup page-specific event listeners
                setupPageEventListeners(page);
                
            } catch (error) {
                console.error('Error loading page:', error);
                contentArea.innerHTML = `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>পৃষ্ঠা লোড করতে সমস্যা হয়েছে</p>
                        <button onclick="loadPageContent('${page}')" class="mt-4 text-blue-600">
                            আবার চেষ্টা করুন
                        </button>
                    </div>
                `;
            }
        }
        
        // Load dashboard content
        async function loadDashboardContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/dashboard/stats`);
                
                if (!response.ok) {
                    throw new Error('Failed to load dashboard data');
                }
                
                const data = await response.json();
                
                return `
                    <div id="dashboard-page" class="page-content">
                        <!-- Statistics Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8">
                            <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-gray-500 text-sm">মোট অর্ডার</p>
                                        <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalOrders || 0}</p>
                                    </div>
                                    <div class="text-red-600 bg-red-50 p-2 md:p-3 rounded-lg">
                                        <i class="fas fa-shopping-cart text-xl md:text-2xl"></i>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-100">
                                    <p class="text-yellow-600 text-sm">
                                        <i class="fas fa-clock mr-1"></i>
                                        <span>${data.pendingOrders || 0}</span> পেন্ডিং
                                    </p>
                                </div>
                            </div>
                            
                            <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-gray-500 text-sm">মোট আয়</p>
                                        <p class="text-2xl md:text-3xl font-bold mt-2">${(data.totalRevenue || 0).toLocaleString('bn-BD')}</p>
                                        <p class="text-gray-500 text-sm">টাকা</p>
                                    </div>
                                    <div class="text-green-600 bg-green-50 p-2 md:p-3 rounded-lg">
                                        <i class="fas fa-money-bill-wave text-xl md:text-2xl"></i>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-100">
                                    <p class="text-green-600 text-sm">
                                        <i class="fas fa-check-circle mr-1"></i>
                                        <span>${data.deliveredOrders || 0}</span> ডেলিভার্ড
                                    </p>
                                </div>
                            </div>
                            
                            <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-gray-500 text-sm">মোট পণ্য</p>
                                        <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalProducts || 0}</p>
                                    </div>
                                    <div class="text-blue-600 bg-blue-50 p-2 md:p-3 rounded-lg">
                                        <i class="fas fa-tshirt text-xl md:text-2xl"></i>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-100">
                                    <p class="text-blue-600 text-sm">
                                        <i class="fas fa-box-open mr-1"></i>
                                        সক্রিয় পণ্য
                                    </p>
                                </div>
                            </div>
                            
                            <div class="stat-card bg-white rounded-xl p-4 md:p-6">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-gray-500 text-sm">মোট রিভিউ</p>
                                        <p class="text-2xl md:text-3xl font-bold mt-2">${data.totalReviews || 0}</p>
                                    </div>
                                    <div class="text-yellow-600 bg-yellow-50 p-2 md:p-3 rounded-lg">
                                        <i class="fas fa-star text-xl md:text-2xl"></i>
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-100">
                                    <p class="text-red-600 text-sm">
                                        <i class="fas fa-hourglass-half mr-1"></i>
                                        <span>${data.pendingReviews || 0}</span> পেন্ডিং
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Orders -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6 md:mb-8">
                            <div class="p-4 md:p-6 border-b border-gray-200">
                                <div class="flex justify-between items-center">
                                    <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                        <i class="fas fa-clock mr-3 text-yellow-500"></i>
                                        সাম্প্রতিক অর্ডারসমূহ
                                    </h2>
                                    <a href="#orders" onclick="switchPage('orders')" class="text-red-600 hover:text-red-800 text-sm font-medium flex items-center">
                                        <span>সব অর্ডার দেখুন</span>
                                        <i class="fas fa-arrow-right ml-2"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="p-4 md:p-6">
                                <div class="table-responsive">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>অর্ডার আইডি</th>
                                                <th>গ্রাহকের নাম</th>
                                                <th>পণ্য</th>
                                                <th>মোট</th>
                                                <th>স্ট্যাটাস</th>
                                                <th>তারিখ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recent-orders-table">
                                            ${data.recentOrders && data.recentOrders.length > 0 ? 
                                                data.recentOrders.map(order => `
                                                    <tr>
                                                        <td class="font-mono text-sm">${order.orderId || 'N/A'}</td>
                                                        <td>${order.customerName || 'N/A'}</td>
                                                        <td class="truncate max-w-xs">${order.productName || 'N/A'}</td>
                                                        <td>${order.totalPrice || 0} টাকা</td>
                                                        <td>
                                                            <span class="order-status status-${order.status || 'pending'}">
                                                                ${getStatusText(order.status)}
                                                            </span>
                                                        </td>
                                                        <td class="text-sm">${formatDate(order.createdAt)}</td>
                                                    </tr>
                                                `).join('') : 
                                                `<tr><td colspan="6" class="p-8 text-center text-gray-500">কোনো অর্ডার পাওয়া যায়নি</td></tr>`
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                                    <i class="fas fa-bolt mr-2 text-green-500"></i>
                                    দ্রুত কাজ
                                </h3>
                                <div class="space-y-3">
                                    <button onclick="showAddProductModal()" class="w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-300 flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 mr-3">
                                                <i class="fas fa-plus"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">নতুন পণ্য যোগ করুন</p>
                                                <p class="text-gray-500 text-sm">পণ্য তালিকায় নতুন আইটেম যোগ করুন</p>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </button>
                                    
                                    <button onclick="switchPage('orders')" class="w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-300 flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center text-yellow-600 mr-3">
                                                <i class="fas fa-shopping-cart"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">নতুন অর্ডার চেক করুন</p>
                                                <p class="text-gray-500 text-sm">পেন্ডিং অর্ডারগুলো দেখুন</p>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </button>
                                    
                                    <button onclick="switchPage('reviews')" class="w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-300 flex items-center justify-between">
                                        <div class="flex items-center">
                                            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 mr-3">
                                                <i class="fas fa-star"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium">নতুন রিভিউ চেক করুন</p>
                                                <p class="text-gray-500 text-sm">পেন্ডিং রিভিউগুলো এপ্রুভ করুন</p>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-400"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                                    <i class="fas fa-chart-line mr-2 text-red-500"></i>
                                    সংক্ষিপ্ত তথ্য
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <p class="text-gray-500 text-sm mb-1">গড় অর্ডার মূল্য</p>
                                        <p class="font-medium">${data.totalOrders > 0 ? Math.round((data.totalRevenue || 0) / data.totalOrders).toLocaleString('bn-BD') : 0} টাকা</p>
                                    </div>
                                    <div>
                                        <p class="text-gray-500 text-sm mb-1">অর্ডার রূপান্তর হার</p>
                                        <div class="flex items-center">
                                            <div class="w-full bg-gray-200 rounded-full h-2 mr-2">
                                                <div class="bg-green-600 h-2 rounded-full" style="width: ${data.totalOrders > 0 ? Math.min(85, Math.round((data.deliveredOrders || 0) / data.totalOrders * 100)) : 0}%"></div>
                                            </div>
                                            <span class="text-sm font-medium">${data.totalOrders > 0 ? Math.min(85, Math.round((data.deliveredOrders || 0) / data.totalOrders * 100)) : 0}%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading dashboard:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>ড্যাশবোর্ড লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load products content
        async function loadProductsContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products`);
                
                if (!response.ok) {
                    throw new Error('Failed to load products');
                }
                
                const products = await response.json();
                
                return `
                    <div id="products-page" class="page-content">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                            <i class="fas fa-tshirt mr-3 text-blue-500"></i>
                                            পণ্য ব্যবস্থাপনা
                                        </h2>
                                        <p class="text-gray-600 text-sm mt-1">আপনার পণ্য তালিকা পরিচালনা করুন</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button onclick="loadPageContent('products')" class="btn btn-outline flex items-center">
                                            <i class="fas fa-sync mr-2"></i>
                                            রিফ্রেশ
                                        </button>
                                        <button onclick="showAddProductModal()" class="btn btn-primary flex items-center">
                                            <i class="fas fa-plus mr-2"></i>
                                            নতুন পণ্য
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="table-responsive">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>পণ্যের নাম</th>
                                                <th>ছবি</th>
                                                <th>দাম</th>
                                                <th>ছাড়</th>
                                                <th>সাইজ</th>
                                                <th>স্ট্যাটাস</th>
                                                <th>ক্রিয়া</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${products && products.length > 0 ? 
                                                products.map(product => {
                                                    const firstImage = product.colors && product.colors.length > 0 ? product.colors[0].image : 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                                                    return `
                                                        <tr>
                                                            <td class="font-medium">${product.name}</td>
                                                            <td>
                                                                <img src="${firstImage}" alt="${product.name}" 
                                                                     class="w-12 h-12 object-cover rounded-lg">
                                                            </td>
                                                            <td>
                                                                <span class="line-through text-gray-500 text-sm">${product.regularPrice} টাকা</span><br>
                                                                <span class="text-red-600 font-bold">${product.offerPrice} টাকা</span>
                                                            </td>
                                                            <td>${product.offerPercentage}%</td>
                                                            <td>${product.size}</td>
                                                            <td>
                                                                <span class="badge ${product.isActive ? 'badge-success' : 'badge-danger'}">
                                                                    ${product.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়'}
                                                                </span>
                                                            </td>
                                                            <td>
                                                                <div class="flex space-x-2">
                                                                    <button onclick="editProduct('${product._id}')" 
                                                                            class="text-blue-600 hover:text-blue-800 p-1" title="এডিট">
                                                                        <i class="fas fa-edit"></i>
                                                                    </button>
                                                                    <button onclick="deleteProduct('${product._id}')" 
                                                                            class="text-red-600 hover:text-red-800 p-1" title="ডিলিট">
                                                                        <i class="fas fa-trash"></i>
                                                                    </button>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    `;
                                                }).join('') : 
                                                `<tr><td colspan="7" class="p-8 text-center text-gray-500">কোনো পণ্য পাওয়া যায়নি</td></tr>`
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading products:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>পণ্য লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load orders content
        async function loadOrdersContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/orders`);
                
                if (!response.ok) {
                    throw new Error('Failed to load orders');
                }
                
                const data = await response.json();
                const orders = data.orders || [];
                
                return `
                    <div id="orders-page" class="page-content">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                            <i class="fas fa-shopping-cart mr-3 text-green-500"></i>
                                            অর্ডার ব্যবস্থাপনা
                                        </h2>
                                        <p class="text-gray-600 text-sm mt-1">গ্রাহকদের অর্ডার তালিকা এবং স্ট্যাটাস</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <select id="order-filter" class="form-input w-48">
                                            <option value="">সব অর্ডার</option>
                                            <option value="pending">পেন্ডিং</option>
                                            <option value="confirmed">কনফার্মড</option>
                                            <option value="processing">প্রসেসিং</option>
                                            <option value="shipped">শিপড</option>
                                            <option value="delivered">ডেলিভার্ড</option>
                                            <option value="cancelled">ক্যান্সেলড</option>
                                        </select>
                                        <button onclick="loadPageContent('orders')" class="btn btn-outline flex items-center">
                                            <i class="fas fa-sync mr-2"></i>
                                            রিফ্রেশ
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="table-responsive">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>অর্ডার আইডি</th>
                                                <th>গ্রাহক</th>
                                                <th>পণ্য</th>
                                                <th>পরিমাণ</th>
                                                <th>মোট</th>
                                                <th>স্ট্যাটাস</th>
                                                <th>তারিখ</th>
                                                <th>ক্রিয়া</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${orders && orders.length > 0 ? 
                                                orders.map(order => `
                                                    <tr>
                                                        <td class="font-mono text-sm">${order.orderId}</td>
                                                        <td>
                                                            <div class="font-medium">${order.customerName}</div>
                                                            <div class="text-sm text-gray-500">${order.phone}</div>
                                                        </td>
                                                        <td>${order.productName}</td>
                                                        <td>${order.quantity} পিস</td>
                                                        <td>${order.totalPrice} টাকা</td>
                                                        <td>
                                                            <span class="order-status status-${order.status}">
                                                                ${getStatusText(order.status)}
                                                            </span>
                                                        </td>
                                                        <td class="text-sm">${formatDate(order.createdAt)}</td>
                                                        <td>
                                                            <button onclick="viewOrder('${order._id}')" 
                                                                    class="text-blue-600 hover:text-blue-800 p-1" title="বিস্তারিত">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                `).join('') : 
                                                `<tr><td colspan="8" class="p-8 text-center text-gray-500">কোনো অর্ডার পাওয়া যায়নি</td></tr>`
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading orders:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>অর্ডার লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load reviews content
        async function loadReviewsContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/reviews`);
                
                if (!response.ok) {
                    throw new Error('Failed to load reviews');
                }
                
                const reviews = await response.json();
                
                return `
                    <div id="reviews-page" class="page-content">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                            <i class="fas fa-star mr-3 text-yellow-500"></i>
                                            রিভিউ ব্যবস্থাপনা
                                        </h2>
                                        <p class="text-gray-600 text-sm mt-1">গ্রাহকদের রিভিউ এবং রেটিং</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <select id="review-filter" class="form-input w-48">
                                            <option value="">সব রিভিউ</option>
                                            <option value="approved">এপ্রুভড</option>
                                            <option value="pending">পেন্ডিং</option>
                                        </select>
                                        <button onclick="loadPageContent('reviews')" class="btn btn-outline flex items-center">
                                            <i class="fas fa-sync mr-2"></i>
                                            রিফ্রেশ
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                ${reviews && reviews.length > 0 ? 
                                    reviews.map(review => `
                                        <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:bg-gray-50 transition duration-200">
                                            <div class="flex justify-between items-start mb-3">
                                                <div>
                                                    <h4 class="font-bold text-lg">${review.name}</h4>
                                                    <p class="text-gray-600 text-sm">
                                                        <i class="fas fa-map-marker-alt mr-1"></i>${review.location}
                                                        • <i class="far fa-clock mr-1"></i>${formatDate(review.createdAt)}
                                                    </p>
                                                </div>
                                                <div class="text-yellow-500">
                                                    ${getStarRatingHTML(review.rating)}
                                                </div>
                                            </div>
                                            <p class="text-gray-700 mb-4 bg-gray-50 p-3 rounded">${review.text}</p>
                                            <div class="flex justify-between items-center">
                                                <span class="badge ${review.isApproved ? 'badge-success' : 'badge-warning'}">
                                                    <i class="fas ${review.isApproved ? 'fa-check-circle' : 'fa-clock'} mr-1"></i>
                                                    ${review.isApproved ? 'এপ্রুভড' : 'পেন্ডিং'}
                                                </span>
                                                <div>
                                                    ${!review.isApproved ? `
                                                        <button onclick="approveReview('${review._id}')" 
                                                                class="btn btn-outline text-sm">
                                                            <i class="fas fa-check mr-1"></i> এপ্রুভ
                                                        </button>
                                                    ` : ''}
                                                    <button onclick="deleteReview('${review._id}')" 
                                                            class="btn btn-outline text-sm ml-2">
                                                        <i class="fas fa-trash mr-1"></i> ডিলিট
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('') : 
                                    `<div class="text-center p-8 text-gray-500">কোনো রিভিউ পাওয়া যায়নি</div>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading reviews:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>রিভিউ লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load sliders content
        async function loadSlidersContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders`);
                
                if (!response.ok) {
                    throw new Error('Failed to load sliders');
                }
                
                const sliders = await response.json();
                
                return `
                    <div id="sliders-page" class="page-content">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                            <i class="fas fa-images mr-3 text-purple-500"></i>
                                            স্লাইডার ব্যবস্থাপনা
                                        </h2>
                                        <p class="text-gray-600 text-sm mt-1">হোমপেজ স্লাইডার ইমেজ এবং কন্টেন্ট</p>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button onclick="loadPageContent('sliders')" class="btn btn-outline flex items-center">
                                            <i class="fas fa-sync mr-2"></i>
                                            রিফ্রেশ
                                        </button>
                                        <button onclick="showAddSliderModal()" class="btn btn-primary flex items-center">
                                            <i class="fas fa-plus mr-2"></i>
                                            নতুন স্লাইডার
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                ${sliders && sliders.length > 0 ? 
                                    sliders.map(slider => `
                                        <div class="border border-gray-200 rounded-lg p-6 mb-6 hover:shadow-md transition duration-200">
                                            <div class="flex justify-between items-start mb-4">
                                                <div class="flex items-center">
                                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 mr-3">
                                                        <i class="fas fa-image"></i>
                                                    </div>
                                                    <div>
                                                        <h3 class="font-bold">স্লাইড #${slider.slideNumber}</h3>
                                                        <p class="text-gray-600 text-sm">${slider.title} - ${slider.subtitle}</p>
                                                    </div>
                                                </div>
                                                <label class="inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" ${slider.isActive ? 'checked' : ''} 
                                                           onchange="toggleSlider('${slider._id}', this.checked)"
                                                           class="sr-only peer">
                                                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                                    <span class="ml-3 text-sm font-medium">সক্রিয়</span>
                                                </label>
                                            </div>
                                            
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div>
                                                    <img src="${slider.imageUrl}" alt="Slider ${slider.slideNumber}" 
                                                         class="w-full h-48 object-cover rounded-lg shadow">
                                                </div>
                                                <div class="space-y-4">
                                                    <div>
                                                        <label class="form-label">শিরোনাম</label>
                                                        <input type="text" value="${slider.title}" 
                                                               onchange="updateSliderField('${slider._id}', 'title', this.value)"
                                                               class="form-input text-sm">
                                                    </div>
                                                    <div>
                                                        <label class="form-label">সাবটাইটেল</label>
                                                        <input type="text" value="${slider.subtitle}" 
                                                               onchange="updateSliderField('${slider._id}', 'subtitle', this.value)"
                                                               class="form-input text-sm">
                                                    </div>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div>
                                                            <label class="form-label">দাম</label>
                                                            <input type="number" value="${slider.price}" 
                                                                   onchange="updateSliderField('${slider._id}', 'price', this.value)"
                                                                   class="form-input text-sm">
                                                        </div>
                                                        <div>
                                                            <label class="form-label">আসল দাম</label>
                                                            <input type="number" value="${slider.originalPrice}" 
                                                                   onchange="updateSliderField('${slider._id}', 'originalPrice', this.value)"
                                                                   class="form-input text-sm">
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <button onclick="editSlider('${slider._id}')" 
                                                                class="btn btn-outline w-full text-sm">
                                                            <i class="fas fa-edit mr-1"></i> সম্পাদনা
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('') : 
                                    `<div class="text-center p-8 text-gray-500">কোনো স্লাইডার পাওয়া যায়নি</div>`
                                }
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading sliders:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>স্লাইডার লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load settings content
        async function loadSettingsContent() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/settings`);
                
                if (!response.ok) {
                    throw new Error('Failed to load settings');
                }
                
                const settings = await response.json();
                
                return `
                    <div id="settings-page" class="page-content">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-8">
                            <div class="p-6 border-b border-gray-200">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                            <i class="fas fa-cog mr-3 text-gray-500"></i>
                                            ওয়েবসাইট সেটিংস
                                        </h2>
                                        <p class="text-gray-600 text-sm mt-1">ওয়েবসাইটের সাধারণ সেটিংস কনফিগারেশন</p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <form id="settings-form" class="space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-whatsapp mr-2 text-green-500"></i>
                                                ওয়াটসঅ্যাপ নাম্বার
                                            </label>
                                            <input type="text" id="whatsapp-number" 
                                                   class="form-input"
                                                   placeholder="019XXXXXXXX"
                                                   value="${settings.whatsappNumber || '01911465879'}">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-phone-alt mr-2 text-blue-500"></i>
                                                ফোন নাম্বার
                                            </label>
                                            <input type="text" id="phone-number" 
                                                   class="form-input"
                                                   placeholder="019XXXXXXXX"
                                                   value="${settings.phoneNumber || '01911465879'}">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-file-alt mr-2 text-gray-500"></i>
                                            ফুটার টেক্সট
                                        </label>
                                        <textarea id="footer-text" rows="3"
                                                  class="form-textarea"
                                                  placeholder="প্রিমিয়াম পাঞ্জাবির নির্ভরযোগ্য ঠিকানা">${settings.footerText || 'প্রিমিয়াম পাঞ্জাবির নির্ভরযোগ্য ঠিকানা'}</textarea>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-truck mr-2 text-green-500"></i>
                                                ঢাকার ভিতরে ডেলিভারি চার্জ
                                            </label>
                                            <input type="number" id="delivery-inside" 
                                                   class="form-input"
                                                   placeholder="60"
                                                   value="${settings.deliveryChargeInsideDhaka || 60}">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-truck-moving mr-2 text-red-500"></i>
                                                ঢাকার বাইরে ডেলিভারি চার্জ
                                            </label>
                                            <input type="number" id="delivery-outside" 
                                                   class="form-input"
                                                   placeholder="160"
                                                   value="${settings.deliveryChargeOutsideDhaka || 160}">
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-tshirt mr-2 text-purple-500"></i>
                                                হোমপেজ শিরোনাম
                                            </label>
                                            <input type="text" id="home-page-title" 
                                                   class="form-input"
                                                   placeholder="আমাদের পাঞ্জাবি কালেকশন"
                                                   value="${settings.homePageTitle || 'আমাদের পাঞ্জাবি কালেকশন'}">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">
                                                <i class="fas fa-shopping-cart mr-2 text-red-500"></i>
                                                অর্ডার ফর্ম শিরোনাম
                                            </label>
                                            <input type="text" id="order-form-title" 
                                                   class="form-input"
                                                   placeholder="পাঞ্জাবি অর্ডার ফর্ম"
                                                   value="${settings.orderFormTitle || 'পাঞ্জাবি অর্ডার ফর্ম'}">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-clock mr-2 text-yellow-500"></i>
                                            সার্ভিস সময়
                                        </label>
                                        <input type="text" id="service-hours" 
                                               class="form-input"
                                               placeholder="সকাল ৯টা - রাত ১০টা"
                                               value="${settings.serviceHours || 'সকাল ৯টা - রাত ১০টা'}">
                                    </div>
                                    
                                    <div class="pt-4 border-t border-gray-200">
                                        <button type="submit" class="btn btn-primary flex items-center">
                                            <i class="fas fa-save mr-2"></i>
                                            সেটিংস সেভ করুন
                                        </button>
                                        <p class="text-gray-500 text-sm mt-3">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            সেটিংস পরিবর্তন করলে তা ফ্রন্টএন্ডেও আপডেট হবে
                                        </p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                console.error('Error loading settings:', error);
                return `
                    <div class="text-center p-8 text-red-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4"></i>
                        <p>সেটিংস লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Setup page event listeners
        function setupPageEventListeners(page) {
            switch(page) {
                case 'orders':
                    const orderFilter = document.getElementById('order-filter');
                    if (orderFilter) {
                        orderFilter.addEventListener('change', filterOrders);
                    }
                    break;
                case 'reviews':
                    const reviewFilter = document.getElementById('review-filter');
                    if (reviewFilter) {
                        reviewFilter.addEventListener('change', filterReviews);
                    }
                    break;
                case 'settings':
                    const settingsForm = document.getElementById('settings-form');
                    if (settingsForm) {
                        settingsForm.addEventListener('submit', handleSettingsSubmit);
                    }
                    break;
            }
        }
        
        // Product modal functions
        function showAddProductModal() {
            document.getElementById('product-modal-title').textContent = 'নতুন পণ্য যোগ করুন';
            document.getElementById('product-id').value = '';
            document.getElementById('product-form').reset();
            document.getElementById('product-status').checked = true;
            document.getElementById('product-status-text').textContent = 'সক্রিয়';
            document.getElementById('colors-container').innerHTML = '';
            addColorField();
            calculateDiscount();
            document.getElementById('product-modal').classList.add('active');
        }
        
        function hideProductModal() {
            document.getElementById('product-modal').classList.remove('active');
        }
        
        function addColorField() {
            const container = document.getElementById('colors-container');
            const index = container.children.length;
            
            const colorField = document.createElement('div');
            colorField.className = 'border border-gray-200 rounded-lg p-4';
            colorField.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <span class="font-medium flex items-center">
                        <i class="fas fa-palette mr-2"></i>
                        রং #${index + 1}
                    </span>
                    ${index > 0 ? `
                    <button type="button" onclick="this.parentElement.parentElement.remove()" 
                            class="text-red-600 hover:text-red-800 p-1">
                        <i class="fas fa-times"></i>
                    </button>
                    ` : ''}
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="form-group">
                        <label class="form-label">রং এর নাম *</label>
                        <input type="text" name="color-name" required class="form-input text-sm" placeholder="লাল ও সোনালী">
                    </div>
                    <div class="form-group">
                        <label class="form-label">রং কোড *</label>
                        <input type="text" name="color-code" required class="form-input text-sm" placeholder="#dc2626" value="#dc2626">
                    </div>
                </div>
                
                <!-- Color Image Upload -->
                <div class="form-group">
                    <label class="form-label">ইমেজ</label>
                    <div class="tab-container">
                        <button type="button" class="tab-btn active" data-tab="color-url-tab-${index}">URL লিংক</button>
                        <button type="button" class="tab-btn" data-tab="color-upload-tab-${index}">ফাইল আপলোড</button>
                    </div>
                    
                    <!-- URL Tab -->
                    <div id="color-url-tab-${index}" class="tab-content active">
                        <input type="text" name="color-image-url" class="form-input text-sm" placeholder="https://example.com/image.jpg">
                        <input type="hidden" name="color-image-base64" value="">
                        <div class="mt-2">
                            <img name="color-url-preview" class="color-image-preview">
                        </div>
                    </div>
                    
                    <!-- Upload Tab -->
                    <div id="color-upload-tab-${index}" class="tab-content">
                        <div class="color-image-upload" id="color-image-upload-${index}">
                            <div class="text-center">
                                <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                                <p class="font-medium text-sm">ছবি আপলোড করুন</p>
                                <p class="text-gray-500 text-xs mt-1">PNG, JPG, JPEG, WEBP</p>
                                <input type="file" name="color-image-file" accept="image/*" class="hidden">
                            </div>
                            <img name="color-upload-preview" class="color-image-preview">
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(colorField);
            
            // Setup color image tabs
            const newColorField = container.lastElementChild;
            newColorField.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    // Hide all tabs in this color field
                    const parent = this.closest('.tab-container').parentElement;
                    parent.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    parent.querySelectorAll('.tab-btn').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    // Show selected tab
                    this.classList.add('active');
                    parent.querySelector(`#${tabId}`).classList.add('active');
                });
            });
            
            // Setup color URL preview
            const urlInput = newColorField.querySelector('[name="color-image-url"]');
            if (urlInput) {
                urlInput.addEventListener('input', function() {
                    const preview = newColorField.querySelector('[name="color-url-preview"]');
                    if (this.value) {
                        preview.src = this.value;
                        preview.style.display = 'block';
                    } else {
                        preview.style.display = 'none';
                    }
                });
            }
            
            // Setup color file upload
            const uploadContainer = newColorField.querySelector(`#color-image-upload-${index}`);
            if (uploadContainer) {
                uploadContainer.addEventListener('click', () => {
                    newColorField.querySelector('[name="color-image-file"]').click();
                });
                
                newColorField.querySelector('[name="color-image-file"]').addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    // Validate file type
                    if (!file.type.startsWith('image/')) {
                        showNotification('শুধুমাত্র ইমেজ ফাইল নির্বাচন করুন', 'error');
                        return;
                    }
                    
                    // Validate file size (5MB max)
                    if (file.size > 5 * 1024 * 1024) {
                        showNotification('ফাইল সাইজ 5MB এর কম হতে হবে', 'error');
                        return;
                    }
                    
                    // Convert to base64
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const preview = newColorField.querySelector('[name="color-upload-preview"]');
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                        uploadContainer.classList.add('has-image');
                        
                        // Save base64 to hidden input
                        const base64Input = newColorField.querySelector('[name="color-image-base64"]');
                        base64Input.value = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            }
        }
        
        function calculateDiscount() {
            const regularPrice = parseFloat(document.getElementById('regular-price').value) || 0;
            const offerPrice = parseFloat(document.getElementById('offer-price').value) || 0;
            
            if (regularPrice > 0 && offerPrice > 0 && regularPrice >= offerPrice) {
                const discount = ((regularPrice - offerPrice) / regularPrice) * 100;
                document.getElementById('offer-percentage').value = Math.round(discount);
            } else {
                document.getElementById('offer-percentage').value = 0;
            }
        }
        
        async function handleProductSubmit(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('save-product-btn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
            submitBtn.disabled = true;
            
            const productId = document.getElementById('product-id').value;
            const colors = [];
            
            // Collect color data
            document.querySelectorAll('#colors-container > div').forEach(container => {
                const name = container.querySelector('[name="color-name"]').value;
                const code = container.querySelector('[name="color-code"]').value;
                const imageUrl = container.querySelector('[name="color-image-url"]').value;
                const imageBase64 = container.querySelector('[name="color-image-base64"]').value;
                
                if (!name || !code) {
                    showNotification('রং এর নাম এবং কোড অবশ্যই দিতে হবে', 'error');
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    return;
                }
                
                // Prepare color data
                const colorData = { 
                    name, 
                    code
                };
                
                // Handle image - base64 has priority over URL
                if (imageBase64) {
                    colorData.imageFile = imageBase64; // Base64 string
                } else if (imageUrl) {
                    colorData.image = imageUrl;
                } else {
                    colorData.image = 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                }
                
                colors.push(colorData);
            });
            
            if (colors.length === 0) {
                showNotification('অন্তত একটি রং যোগ করুন', 'error');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                return;
            }
            
            const productData = {
                name: document.getElementById('product-name').value,
                description: document.getElementById('product-description').value,
                colors: colors,
                size: document.getElementById('product-size').value,
                regularPrice: parseFloat(document.getElementById('regular-price').value),
                offerPrice: parseFloat(document.getElementById('offer-price').value),
                offerPercentage: parseFloat(document.getElementById('offer-percentage').value),
                isActive: document.getElementById('product-status').checked
            };
            
            try {
                const url = productId ? 
                    `${API_BASE_URL}/api/admin/products/${productId}` : 
                    `${API_BASE_URL}/api/admin/products`;
                
                const method = productId ? 'PUT' : 'POST';
                
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(productData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    hideProductModal();
                    loadPageContent('products');
                    showNotification('পণ্য সফলভাবে সেভ হয়েছে!', 'success');
                } else {
                    const error = await response.json();
                    throw new Error(error.error || 'Failed to save product');
                }
            } catch (error) {
                console.error('Error saving product:', error);
                showNotification('পণ্য সেভ করতে সমস্যা হয়েছে: ' + error.message, 'error');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        async function editProduct(productId) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products`);
                
                if (response.ok) {
                    const products = await response.json();
                    const product = products.find(p => p._id === productId);
                    
                    if (product) {
                        document.getElementById('product-modal-title').textContent = 'পণ্য সম্পাদনা';
                        document.getElementById('product-id').value = product._id;
                        document.getElementById('product-name').value = product.name;
                        document.getElementById('product-description').value = product.description;
                        document.getElementById('product-size').value = product.size;
                        document.getElementById('regular-price').value = product.regularPrice;
                        document.getElementById('offer-price').value = product.offerPrice;
                        document.getElementById('offer-percentage').value = product.offerPercentage;
                        document.getElementById('product-status').checked = product.isActive;
                        document.getElementById('product-status-text').textContent = product.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                        
                        // Load colors
                        document.getElementById('colors-container').innerHTML = '';
                        product.colors.forEach((color, index) => {
                            addColorField();
                            const lastContainer = document.querySelector('#colors-container > div:last-child');
                            lastContainer.querySelector('[name="color-name"]').value = color.name;
                            lastContainer.querySelector('[name="color-code"]').value = color.code;
                            
                            // Set image URL
                            const urlInput = lastContainer.querySelector('[name="color-image-url"]');
                            if (urlInput && color.image) {
                                urlInput.value = color.image;
                                const preview = lastContainer.querySelector('[name="color-url-preview"]');
                                preview.src = color.image;
                                preview.style.display = 'block';
                            }
                        });
                        
                        calculateDiscount();
                        document.getElementById('product-modal').classList.add('active');
                    }
                }
            } catch (error) {
                console.error('Error loading product:', error);
                showNotification('পণ্য লোড করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        async function deleteProduct(productId) {
            if (!confirm('আপনি কি নিশ্চিত যে এই পণ্য ডিলিট করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products/${productId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadPageContent('products');
                    showNotification('পণ্য সফলভাবে ডিলিট হয়েছে!', 'success');
                } else {
                    throw new Error('Failed to delete product');
                }
            } catch (error) {
                console.error('Error deleting product:', error);
                showNotification('পণ্য ডিলিট করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        // Slider modal functions
        function showAddSliderModal() {
            document.getElementById('slider-modal-title').textContent = 'নতুন স্লাইডার যোগ করুন';
            document.getElementById('slider-id').value = '';
            document.getElementById('slider-form').reset();
            document.getElementById('slider-status').checked = true;
            document.getElementById('slider-status-text').textContent = 'সক্রিয়';
            document.getElementById('slider-image-upload').classList.remove('has-image');
            document.getElementById('slider-upload-preview').classList.remove('show');
            document.getElementById('slider-url-preview').classList.remove('show');
            document.getElementById('slider-modal').classList.add('active');
            
            // Activate URL tab by default
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector('.tab-btn[data-tab="url-tab"]').classList.add('active');
            document.getElementById('url-tab').classList.add('active');
        }
        
        function hideSliderModal() {
            document.getElementById('slider-modal').classList.remove('active');
        }
        
        async function handleSliderImageUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            // Validate file type
            if (!file.type.startsWith('image/')) {
                showNotification('শুধুমাত্র ইমেজ ফাইল নির্বাচন করুন', 'error');
                return;
            }
            
            // Validate file size (5MB max)
            if (file.size > 5 * 1024 * 1024) {
                showNotification('ফাইল সাইজ 5MB এর কম হতে হবে', 'error');
                return;
            }
            
            // Convert to base64
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('slider-upload-preview');
                preview.src = e.target.result;
                preview.classList.add('show');
                document.getElementById('slider-image-upload').classList.add('has-image');
                
                // Save base64 to hidden input
                document.getElementById('slider-image-base64').value = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        async function handleSliderSubmit(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('save-slider-btn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
            submitBtn.disabled = true;
            
            const sliderId = document.getElementById('slider-id').value;
            
            // Get image from active tab
            let imageData = {};
            const activeTab = document.querySelector('.tab-content.active');
            
            if (activeTab.id === 'url-tab') {
                const imageUrl = document.getElementById('slider-image-url').value;
                if (!imageUrl) {
                    showNotification('স্লাইডার ইমেজ URL দিন', 'error');
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    return;
                }
                imageData.imageUrl = imageUrl;
            } else if (activeTab.id === 'upload-tab') {
                const base64Data = document.getElementById('slider-image-base64').value;
                if (!base64Data) {
                    showNotification('স্লাইডার ইমেজ ফাইল নির্বাচন করুন', 'error');
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    return;
                }
                imageData.imageFile = base64Data;
            }
            
            const sliderData = {
                slideNumber: parseInt(document.getElementById('slider-number').value),
                title: document.getElementById('slider-title').value,
                subtitle: document.getElementById('slider-subtitle').value,
                description: document.getElementById('slider-description').value,
                badgeText: document.getElementById('slider-badge-text').value,
                badgeColor: document.getElementById('slider-badge-color').value,
                price: parseFloat(document.getElementById('slider-price').value) || 0,
                originalPrice: parseFloat(document.getElementById('slider-original-price').value) || 0,
                isActive: document.getElementById('slider-status').checked,
                ...imageData
            };
            
            try {
                const url = sliderId ? 
                    `${API_BASE_URL}/api/admin/sliders/${sliderId}` : 
                    `${API_BASE_URL}/api/admin/sliders`;
                
                const method = sliderId ? 'PUT' : 'POST';
                
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(sliderData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    hideSliderModal();
                    loadPageContent('sliders');
                    showNotification('স্লাইডার সফলভাবে সেভ হয়েছে!', 'success');
                } else {
                    const error = await response.json();
                    throw new Error(error.error || 'Failed to save slider');
                }
            } catch (error) {
                console.error('Error saving slider:', error);
                showNotification('স্লাইডার সেভ করতে সমস্যা হয়েছে: ' + error.message, 'error');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        async function editSlider(sliderId) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders`);
                
                if (response.ok) {
                    const sliders = await response.json();
                    const slider = sliders.find(s => s._id === sliderId);
                    
                    if (slider) {
                        document.getElementById('slider-modal-title').textContent = 'স্লাইডার সম্পাদনা';
                        document.getElementById('slider-id').value = slider._id;
                        document.getElementById('slider-number').value = slider.slideNumber;
                        document.getElementById('slider-title').value = slider.title;
                        document.getElementById('slider-subtitle').value = slider.subtitle;
                        document.getElementById('slider-description').value = slider.description;
                        document.getElementById('slider-badge-text').value = slider.badgeText || '';
                        document.getElementById('slider-badge-color').value = slider.badgeColor || 'red';
                        document.getElementById('slider-price').value = slider.price || '';
                        document.getElementById('slider-original-price').value = slider.originalPrice || '';
                        document.getElementById('slider-status').checked = slider.isActive;
                        document.getElementById('slider-status-text').textContent = slider.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়';
                        
                        // Set image URL
                        document.getElementById('slider-image-url').value = slider.imageUrl;
                        const urlPreview = document.getElementById('slider-url-preview');
                        urlPreview.src = slider.imageUrl;
                        urlPreview.classList.add('show');
                        
                        // Activate URL tab
                        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                        document.querySelector('.tab-btn[data-tab="url-tab"]').classList.add('active');
                        document.getElementById('url-tab').classList.add('active');
                        
                        document.getElementById('slider-modal').classList.add('active');
                    }
                }
            } catch (error) {
                console.error('Error loading slider:', error);
                showNotification('স্লাইডার লোড করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        async function updateSliderField(sliderId, field, value) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ [field]: value })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to update slider');
                }
                showNotification('স্লাইডার আপডেট হয়েছে!', 'success');
            } catch (error) {
                console.error('Error updating slider:', error);
                showNotification('স্লাইডার আপডেট করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        async function toggleSlider(sliderId, isActive) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ isActive })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to toggle slider');
                }
                showNotification(`স্লাইডার ${isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়'} করা হয়েছে`, 'success');
            } catch (error) {
                console.error('Error toggling slider:', error);
                showNotification('স্লাইডার স্ট্যাটাস পরিবর্তন করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        // Order functions
        async function viewOrder(orderId) {
            selectedOrderId = orderId;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/orders`);
                
                if (response.ok) {
                    const data = await response.json();
                    const order = data.orders.find(o => o._id === orderId);
                    
                    if (order) {
                        document.getElementById('order-details').innerHTML = `
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                        <i class="fas fa-user mr-2 text-blue-500"></i>
                                        গ্রাহক তথ্য
                                    </h4>
                                    <p class="mb-2"><strong>নাম:</strong> ${order.customerName}</p>
                                    <p class="mb-2"><strong>ফোন:</strong> ${order.phone}</p>
                                    <p><strong>ঠিকানা:</strong> ${order.address}</p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                        <i class="fas fa-shopping-cart mr-2 text-green-500"></i>
                                        অর্ডার তথ্য
                                    </h4>
                                    <p class="mb-2"><strong>অর্ডার আইডি:</strong> ${order.orderId}</p>
                                    <p class="mb-2"><strong>পণ্য:</strong> ${order.productName}</p>
                                    <p class="mb-2"><strong>রং:</strong> ${order.color}</p>
                                    <p class="mb-2"><strong>সাইজ:</strong> ${order.size}</p>
                                    <p class="mb-2"><strong>পরিমাণ:</strong> ${order.quantity} পিস</p>
                                    <p><strong>মোট দাম:</strong> ${order.totalPrice} টাকা</p>
                                </div>
                            </div>
                        `;
                        
                        document.getElementById('order-status-select').value = order.status;
                        document.getElementById('order-notes').value = order.notes || '';
                        
                        document.getElementById('order-modal').classList.add('active');
                    }
                }
            } catch (error) {
                console.error('Error loading order:', error);
                showNotification('অর্ডার লোড করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        async function updateOrderStatus() {
            const status = document.getElementById('order-status-select').value;
            const notes = document.getElementById('order-notes').value;
            
            const updateBtn = document.getElementById('update-order-btn');
            const originalText = updateBtn.innerHTML;
            updateBtn.innerHTML = '<div class="loading mr-2"></div> আপডেট হচ্ছে...';
            updateBtn.disabled = true;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/orders/${selectedOrderId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status, notes })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    hideOrderModal();
                    loadPageContent('orders');
                    showNotification('অর্ডার স্ট্যাটাস সফলভাবে আপডেট হয়েছে!', 'success');
                } else {
                    throw new Error('Failed to update order');
                }
            } catch (error) {
                console.error('Error updating order:', error);
                showNotification('স্ট্যাটাস আপডেট করতে সমস্যা হয়েছে!', 'error');
            } finally {
                updateBtn.innerHTML = originalText;
                updateBtn.disabled = false;
            }
        }
        
        function hideOrderModal() {
            document.getElementById('order-modal').classList.remove('active');
            selectedOrderId = null;
        }
        
        // Review functions
        async function approveReview(reviewId) {
            if (!confirm('আপনি কি এই রিভিউ এপ্রুভ করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}/approve`, {
                    method: 'PUT'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadPageContent('reviews');
                    showNotification('রিভিউ সফলভাবে এপ্রুভ হয়েছে!', 'success');
                } else {
                    throw new Error('Failed to approve review');
                }
            } catch (error) {
                console.error('Error approving review:', error);
                showNotification('রিভিউ এপ্রুভ করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        async function deleteReview(reviewId) {
            if (!confirm('আপনি কি নিশ্চিত যে এই রিভিউ ডিলিট করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadPageContent('reviews');
                    showNotification('রিভিউ সফলভাবে ডিলিট হয়েছে!', 'success');
                } else {
                    throw new Error('Failed to delete review');
                }
            } catch (error) {
                console.error('Error deleting review:', error);
                showNotification('রিভিউ ডিলিট করতে সমস্যা হয়েছে!', 'error');
            }
        }
        
        // Settings functions
        async function handleSettingsSubmit(e) {
            e.preventDefault();
            
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading mr-2"></div> সেভ হচ্ছে...';
            submitBtn.disabled = true;
            
            const settingsData = {
                whatsappNumber: document.getElementById('whatsapp-number').value,
                phoneNumber: document.getElementById('phone-number').value,
                footerText: document.getElementById('footer-text').value,
                deliveryChargeInsideDhaka: parseFloat(document.getElementById('delivery-inside').value),
                deliveryChargeOutsideDhaka: parseFloat(document.getElementById('delivery-outside').value),
                homePageTitle: document.getElementById('home-page-title').value,
                orderFormTitle: document.getElementById('order-form-title').value,
                serviceHours: document.getElementById('service-hours').value
            };
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/settings`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(settingsData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showNotification('সেটিংস সফলভাবে সেভ হয়েছে!', 'success');
                } else {
                    throw new Error('Failed to save settings');
                }
            } catch (error) {
                console.error('Error saving settings:', error);
                showNotification('সেটিংস সেভ করতে সমস্যা হয়েছে!', 'error');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        // Filter functions
        async function filterOrders() {
            const status = document.getElementById('order-filter').value;
            let url = `${API_BASE_URL}/api/admin/orders`;
            if (status) {
                url += `?status=${status}`;
            }
            
            try {
                const response = await fetch(url);
                
                if (response.ok) {
                    const data = await response.json();
                    const orders = data.orders || [];
                    
                    const tableBody = document.querySelector('#orders-page tbody');
                    tableBody.innerHTML = orders.map(order => `
                        <tr>
                            <td class="font-mono text-sm">${order.orderId}</td>
                            <td>
                                <div class="font-medium">${order.customerName}</div>
                                <div class="text-sm text-gray-500">${order.phone}</div>
                            </td>
                            <td>${order.productName}</td>
                            <td>${order.quantity} পিস</td>
                            <td>${order.totalPrice} টাকা</td>
                            <td>
                                <span class="order-status status-${order.status}">
                                    ${getStatusText(order.status)}
                                </span>
                            </td>
                            <td class="text-sm">${formatDate(order.createdAt)}</td>
                            <td>
                                <button onclick="viewOrder('${order._id}')" 
                                        class="text-blue-600 hover:text-blue-800 p-1" title="বিস্তারিত">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                console.error('Error filtering orders:', error);
                showNotification('অর্ডার ফিল্টার করতে সমস্যা হয়েছে', 'error');
            }
        }
        
        async function filterReviews() {
            const filter = document.getElementById('review-filter').value;
            let url = `${API_BASE_URL}/api/admin/reviews`;
            if (filter) {
                url += `?approved=${filter === 'approved'}`;
            }
            
            try {
                const response = await fetch(url);
                
                if (response.ok) {
                    const reviews = await response.json();
                    const container = document.querySelector('#reviews-page .p-6');
                    
                    if (reviews && reviews.length > 0) {
                        container.innerHTML = reviews.map(review => `
                            <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:bg-gray-50 transition duration-200">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h4 class="font-bold text-lg">${review.name}</h4>
                                        <p class="text-gray-600 text-sm">
                                            <i class="fas fa-map-marker-alt mr-1"></i>${review.location}
                                            • <i class="far fa-clock mr-1"></i>${formatDate(review.createdAt)}
                                        </p>
                                    </div>
                                    <div class="text-yellow-500">
                                        ${getStarRatingHTML(review.rating)}
                                    </div>
                                </div>
                                <p class="text-gray-700 mb-4 bg-gray-50 p-3 rounded">${review.text}</p>
                                <div class="flex justify-between items-center">
                                    <span class="badge ${review.isApproved ? 'badge-success' : 'badge-warning'}">
                                        <i class="fas ${review.isApproved ? 'fa-check-circle' : 'fa-clock'} mr-1"></i>
                                        ${review.isApproved ? 'এপ্রুভড' : 'পেন্ডিং'}
                                    </span>
                                    <div>
                                        ${!review.isApproved ? `
                                            <button onclick="approveReview('${review._id}')" 
                                                    class="btn btn-outline text-sm">
                                                <i class="fas fa-check mr-1"></i> এপ্রুভ
                                            </button>
                                        ` : ''}
                                        <button onclick="deleteReview('${review._id}')" 
                                                class="btn btn-outline text-sm ml-2">
                                            <i class="fas fa-trash mr-1"></i> ডিলিট
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        container.innerHTML = '<div class="text-center p-8 text-gray-500">কোনো রিভিউ পাওয়া যায়নি</div>';
                    }
                }
            } catch (error) {
                console.error('Error filtering reviews:', error);
                showNotification('রিভিউ ফিল্টার করতে সমস্যা হয়েছে', 'error');
            }
        }
        
        // Helper functions
        function getStatusText(status) {
            const statusMap = {
                'pending': 'পেন্ডিং',
                'confirmed': 'কনফার্মড',
                'processing': 'প্রসেসিং',
                'shipped': 'শিপড',
                'delivered': 'ডেলিভার্ড',
                'cancelled': 'ক্যান্সেলড'
            };
            return statusMap[status] || status;
        }
        
        function getStarRatingHTML(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating ? 
                    '<i class="fas fa-star"></i>' : 
                    '<i class="far fa-star"></i>';
            }
            return stars;
        }
        
        function formatDate(dateString) {
            try {
                const date = new Date(dateString);
                const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                };
                return date.toLocaleDateString('bn-BD', options);
            } catch (e) {
                return dateString;
            }
        }
        
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-container');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} mr-3"></i>
                    <span>${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        function hideAllModals() {
            document.querySelectorAll('.modal.active').forEach(modal => {
                modal.classList.remove('active');
            });
        }
        
        // FIXED: Notification functions for desktop and mobile
        function toggleDesktopNotifications() {
            const dropdown = document.getElementById('notification-dropdown');
            if (!dropdown) return;
            
            // Close mobile menu if open
            if (window.innerWidth < 768 && sidebar.classList.contains('mobile-open')) {
                toggleMobileMenu();
            }
            
            // Toggle dropdown
            dropdown.classList.toggle('show');
        }
        
        function toggleMobileNotifications() {
            const dropdown = document.getElementById('mobile-notification-dropdown');
            if (!dropdown) return;
            
            // Close mobile menu if open
            if (window.innerWidth < 768 && sidebar.classList.contains('mobile-open')) {
                toggleMobileMenu();
            }
            
            // Toggle dropdown
            dropdown.classList.toggle('show');
            
            // Prevent body scroll when dropdown is open on mobile
            if (window.innerWidth < 768) {
                if (dropdown.classList.contains('show')) {
                    document.body.style.overflow = 'hidden';
                } else {
                    document.body.style.overflow = '';
                }
            }
        }
        
        function hideDesktopNotifications() {
            const dropdown = document.getElementById('notification-dropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
            }
        }
        
        function hideMobileNotifications() {
            const dropdown = document.getElementById('mobile-notification-dropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
                
                // Restore body scroll on mobile
                if (window.innerWidth < 768) {
                    document.body.style.overflow = '';
                }
            }
        }
        
        function hideAllNotifications() {
            hideDesktopNotifications();
            hideMobileNotifications();
        }
        
        // Notification polling
        function startNotificationPolling() {
            if (notificationInterval) clearInterval(notificationInterval);
            
            // Check immediately
            checkNotifications();
            
            // Then check every 30 seconds
            notificationInterval = setInterval(checkNotifications, 30000);
        }
        
        // Check for new notifications
        async function checkNotifications() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/notifications`);
                if (response.ok) {
                    const data = await response.json();
                    notifications = data;
                    updateNotificationUI();
                    
                    // Show desktop notification for new items
                    showDesktopNotifications(data);
                }
            } catch (error) {
                console.error('Error checking notifications:', error);
            }
        }
        
        // Update notification UI
        function updateNotificationUI() {
            const totalUnread = notifications.unreadOrders.length + notifications.unreadReviews.length;
            
            // Update counts for both desktop and mobile
            const notificationCount = document.getElementById('notification-count');
            const mobileNotificationCount = document.getElementById('mobile-notification-count');
            
            [notificationCount, mobileNotificationCount].forEach(badge => {
                if (badge) {
                    if (totalUnread > 0) {
                        badge.textContent = totalUnread > 99 ? '99+' : totalUnread;
                        badge.classList.remove('hidden');
                    } else {
                        badge.classList.add('hidden');
                    }
                }
            });
            
            // Update notification lists
            updateNotificationLists();
        }
        
        // Update notification lists for both desktop and mobile
        function updateNotificationLists() {
            updateNotificationList('notification-list');
            updateNotificationList('mobile-notification-list');
        }
        
        // Update a specific notification list
        function updateNotificationList(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            let html = '';
            
            if (notifications.unreadOrders.length === 0 && notifications.unreadReviews.length === 0) {
                html = `
                    <div class="p-8 text-center text-gray-500">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <p>কোনো নতুন নোটিফিকেশন নেই</p>
                    </div>
                `;
            } else {
                // Show orders first
                notifications.unreadOrders.forEach(order => {
                    const timeAgo = getTimeAgo(order.createdAt);
                    html += `
                        <div class="notification-item unread" data-type="order" data-id="${order._id}">
                            <div class="flex items-start">
                                <div class="text-green-600 mr-3 mt-1">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium">নতুন অর্ডার #${order.orderId}</p>
                                    <p class="text-sm text-gray-600">গ্রাহক: ${order.customerName}</p>
                                    <p class="text-sm text-gray-600">পণ্য: ${order.productName}</p>
                                    <p class="text-sm text-gray-600">মূল্য: ${order.totalPrice} টাকা</p>
                                    <p class="time">${timeAgo}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                // Then show reviews
                notifications.unreadReviews.forEach(review => {
                    const timeAgo = getTimeAgo(review.createdAt);
                    html += `
                        <div class="notification-item unread" data-type="review" data-id="${review._id}">
                            <div class="flex items-start">
                                <div class="text-yellow-600 mr-3 mt-1">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium">নতুন রিভিউ</p>
                                    <p class="text-sm text-gray-600">${review.name} - ${review.rating} স্টার</p>
                                    <p class="text-sm text-gray-600 truncate">${review.text.substring(0, 60)}${review.text.length > 60 ? '...' : ''}</p>
                                    <p class="time">${timeAgo}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
            
            // Add click handlers to notification items
            container.querySelectorAll('.notification-item').forEach(item => {
                item.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    const id = this.getAttribute('data-id');
                    
                    markAsRead(type, id);
                    
                    if (type === 'order') {
                        viewOrder(id);
                        hideAllNotifications();
                    } else if (type === 'review') {
                        switchPage('reviews');
                        hideAllNotifications();
                    }
                });
            });
        }
        
        // Mark notification as read
        async function markAsRead(type, id) {
            try {
                await fetch(`${API_BASE_URL}/api/admin/notifications/read`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ type, id })
                });
                
                // Update local state
                if (type === 'order') {
                    notifications.unreadOrders = notifications.unreadOrders.filter(order => order._id !== id);
                } else if (type === 'review') {
                    notifications.unreadReviews = notifications.unreadReviews.filter(review => review._id !== id);
                }
                
                updateNotificationUI();
            } catch (error) {
                console.error('Error marking as read:', error);
            }
        }
        
        // Mark all as read
        async function markAllAsRead() {
            try {
                await fetch(`${API_BASE_URL}/api/admin/notifications/read`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ type: 'all' })
                });
                
                // Clear all notifications
                notifications.unreadOrders = [];
                notifications.unreadReviews = [];
                
                updateNotificationUI();
                showNotification('সব নোটিফিকেশন পড়া হয়েছে', 'success');
                hideAllNotifications();
            } catch (error) {
                console.error('Error marking all as read:', error);
            }
        }
        
        // Show desktop notifications
        function showDesktopNotifications(data) {
            // Check if we have new items
            const hasNewOrders = data.unreadOrders && data.unreadOrders.length > 0;
            const hasNewReviews = data.unreadReviews && data.unreadReviews.length > 0;
            
            if (hasNewOrders) {
                const latestOrder = data.unreadOrders[0];
                if (Notification.permission === 'granted') {
                    new Notification(`🆕 নতুন অর্ডার #${latestOrder.orderId}`, {
                        body: `গ্রাহক: ${latestOrder.customerName}\nপণ্য: ${latestOrder.productName}`,
                        icon: '/favicon.ico'
                    });
                }
            }
            
            if (hasNewReviews) {
                const latestReview = data.unreadReviews[0];
                if (Notification.permission === 'granted') {
                    new Notification(`⭐ নতুন রিভিউ ${latestReview.name}`, {
                        body: `রেটিং: ${latestReview.rating}/5\n${latestReview.text.substring(0, 50)}...`,
                        icon: '/favicon.ico'
                    });
                }
            }
        }
        
        // Request notification permission
        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }
        
        // Helper function to get time ago
        function getTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) {
                return 'এখনই';
            } else if (diffMins < 60) {
                return `${diffMins} মিনিট আগে`;
            } else if (diffHours < 24) {
                return `${diffHours} ঘণ্টা আগে`;
            } else if (diffDays < 7) {
                return `${diffDays} দিন আগে`;
            } else {
                return formatDate(dateString);
            }
        }
        
        // Dashboard function (for backward compatibility)
        async function loadDashboard() {
            loadPageContent('dashboard');
        }
        
        // Expose functions to global scope
        window.editProduct = editProduct;
        window.deleteProduct = deleteProduct;
        window.viewOrder = viewOrder;
        window.approveReview = approveReview;
        window.deleteReview = deleteReview;
        window.editSlider = editSlider;
        window.updateSliderField = updateSliderField;
        window.toggleSlider = toggleSlider;
        window.showAddProductModal = showAddProductModal;
        window.showAddSliderModal = showAddSliderModal;
        window.switchPage = switchPage;
        window.loadPageContent = loadPageContent;
    </script>
</body>
</html>